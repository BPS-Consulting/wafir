var Wafir=(function(v){"use strict";typeof globalThis.process>"u"&&(globalThis.process={env:{NODE_ENV:"production"},versions:{node:""},version:""});const Se=globalThis,He=Se.ShadowRoot&&(Se.ShadyCSS===void 0||Se.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,dt=Symbol(),ht=new WeakMap;let pr=class{constructor(e,r,o){if(this._$cssResult$=!0,o!==dt)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(He&&e===void 0){const o=r!==void 0&&r.length===1;o&&(e=ht.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),o&&ht.set(r,e))}return e}toString(){return this.cssText}};const se=t=>new pr(typeof t=="string"?t:t+"",void 0,dt),gr=(t,e)=>{if(He)t.adoptedStyleSheets=e.map((r=>r instanceof CSSStyleSheet?r:r.styleSheet));else for(const r of e){const o=document.createElement("style"),n=Se.litNonce;n!==void 0&&o.setAttribute("nonce",n),o.textContent=r.cssText,t.appendChild(o)}},ft=He?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const o of e.cssRules)r+=o.cssText;return se(r)})(t):t;const{is:mr,defineProperty:br,getOwnPropertyDescriptor:wr,getOwnPropertyNames:yr,getOwnPropertySymbols:vr,getPrototypeOf:_r}=Object,Ce=globalThis,pt=Ce.trustedTypes,$r=pt?pt.emptyScript:"",xr=Ce.reactiveElementPolyfillSupport,ae=(t,e)=>t,Ee={toAttribute(t,e){switch(e){case Boolean:t=t?$r:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},qe=(t,e)=>!mr(t,e),gt={attribute:!0,type:String,converter:Ee,reflect:!1,useDefault:!1,hasChanged:qe};Symbol.metadata??=Symbol("metadata"),Ce.litPropertyMetadata??=new WeakMap;let Q=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=gt){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const o=Symbol(),n=this.getPropertyDescriptor(e,o,r);n!==void 0&&br(this.prototype,e,n)}}static getPropertyDescriptor(e,r,o){const{get:n,set:i}=wr(this.prototype,e)??{get(){return this[r]},set(s){this[r]=s}};return{get:n,set(s){const a=n?.call(this);i?.call(this,s),this.requestUpdate(e,a,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??gt}static _$Ei(){if(this.hasOwnProperty(ae("elementProperties")))return;const e=_r(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(ae("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(ae("properties"))){const r=this.properties,o=[...yr(r),...vr(r)];for(const n of o)this.createProperty(n,r[n])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[o,n]of r)this.elementProperties.set(o,n)}this._$Eh=new Map;for(const[r,o]of this.elementProperties){const n=this._$Eu(r,o);n!==void 0&&this._$Eh.set(n,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const o=new Set(e.flat(1/0).reverse());for(const n of o)r.unshift(ft(n))}else e!==void 0&&r.push(ft(e));return r}static _$Eu(e,r){const o=r.attribute;return o===!1?void 0:typeof o=="string"?o:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const o of r.keys())this.hasOwnProperty(o)&&(e.set(o,this[o]),delete this[o]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return gr(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,r,o){this._$AK(e,o)}_$ET(e,r){const o=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,o);if(n!==void 0&&o.reflect===!0){const i=(o.converter?.toAttribute!==void 0?o.converter:Ee).toAttribute(r,o.type);this._$Em=e,i==null?this.removeAttribute(n):this.setAttribute(n,i),this._$Em=null}}_$AK(e,r){const o=this.constructor,n=o._$Eh.get(e);if(n!==void 0&&this._$Em!==n){const i=o.getPropertyOptions(n),s=typeof i.converter=="function"?{fromAttribute:i.converter}:i.converter?.fromAttribute!==void 0?i.converter:Ee;this._$Em=n;const a=s.fromAttribute(r,i.type);this[n]=a??this._$Ej?.get(n)??a,this._$Em=null}}requestUpdate(e,r,o){if(e!==void 0){const n=this.constructor,i=this[e];if(o??=n.getPropertyOptions(e),!((o.hasChanged??qe)(i,r)||o.useDefault&&o.reflect&&i===this._$Ej?.get(e)&&!this.hasAttribute(n._$Eu(e,o))))return;this.C(e,r,o)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:o,reflect:n,wrapped:i},s){o&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,s??r??this[e]),i!==!0||s!==void 0)||(this._$AL.has(e)||(this.hasUpdated||o||(r=void 0),this._$AL.set(e,r)),n===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[n,i]of this._$Ep)this[n]=i;this._$Ep=void 0}const o=this.constructor.elementProperties;if(o.size>0)for(const[n,i]of o){const{wrapped:s}=i,a=this[n];s!==!0||this._$AL.has(n)||a===void 0||this.C(n,void 0,i,a)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),this._$EO?.forEach((o=>o.hostUpdate?.())),this.update(r)):this._$EM()}catch(o){throw e=!1,this._$EM(),o}e&&this._$AE(r)}willUpdate(e){}_$AE(e){this._$EO?.forEach((r=>r.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((r=>this._$ET(r,this[r]))),this._$EM()}updated(e){}firstUpdated(e){}};Q.elementStyles=[],Q.shadowRootOptions={mode:"open"},Q[ae("elementProperties")]=new Map,Q[ae("finalized")]=new Map,xr?.({ReactiveElement:Q}),(Ce.reactiveElementVersions??=[]).push("2.1.1");const We=globalThis,ke=We.trustedTypes,mt=ke?ke.createPolicy("lit-html",{createHTML:t=>t}):void 0,bt="$lit$",U=`lit$${Math.random().toFixed(9).slice(2)}$`,wt="?"+U,Sr=`<${wt}>`,W=document,le=()=>W.createComment(""),ce=t=>t===null||typeof t!="object"&&typeof t!="function",Ve=Array.isArray,Cr=t=>Ve(t)||typeof t?.[Symbol.iterator]=="function",Ge=`[ 	
\f\r]`,ue=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,yt=/-->/g,vt=/>/g,V=RegExp(`>|${Ge}(?:([^\\s"'>=/]+)(${Ge}*=${Ge}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),_t=/'/g,$t=/"/g,xt=/^(?:script|style|textarea|title)$/i,Er=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),w=Er(1),G=Symbol.for("lit-noChange"),$=Symbol.for("lit-nothing"),St=new WeakMap,X=W.createTreeWalker(W,129);function Ct(t,e){if(!Ve(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return mt!==void 0?mt.createHTML(e):e}const kr=(t,e)=>{const r=t.length-1,o=[];let n,i=e===2?"<svg>":e===3?"<math>":"",s=ue;for(let a=0;a<r;a++){const u=t[a];let h,l,c=-1,d=0;for(;d<u.length&&(s.lastIndex=d,l=s.exec(u),l!==null);)d=s.lastIndex,s===ue?l[1]==="!--"?s=yt:l[1]!==void 0?s=vt:l[2]!==void 0?(xt.test(l[2])&&(n=RegExp("</"+l[2],"g")),s=V):l[3]!==void 0&&(s=V):s===V?l[0]===">"?(s=n??ue,c=-1):l[1]===void 0?c=-2:(c=s.lastIndex-l[2].length,h=l[1],s=l[3]===void 0?V:l[3]==='"'?$t:_t):s===$t||s===_t?s=V:s===yt||s===vt?s=ue:(s=V,n=void 0);const f=s===V&&t[a+1].startsWith("/>")?" ":"";i+=s===ue?u+Sr:c>=0?(o.push(h),u.slice(0,c)+bt+u.slice(c)+U+f):u+U+(c===-2?a:f)}return[Ct(t,i+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),o]};class de{constructor({strings:e,_$litType$:r},o){let n;this.parts=[];let i=0,s=0;const a=e.length-1,u=this.parts,[h,l]=kr(e,r);if(this.el=de.createElement(h,o),X.currentNode=this.el.content,r===2||r===3){const c=this.el.content.firstChild;c.replaceWith(...c.childNodes)}for(;(n=X.nextNode())!==null&&u.length<a;){if(n.nodeType===1){if(n.hasAttributes())for(const c of n.getAttributeNames())if(c.endsWith(bt)){const d=l[s++],f=n.getAttribute(c).split(U),m=/([.?@])?(.*)/.exec(d);u.push({type:1,index:i,name:m[2],strings:f,ctor:m[1]==="."?Tr:m[1]==="?"?Mr:m[1]==="@"?Rr:Ae}),n.removeAttribute(c)}else c.startsWith(U)&&(u.push({type:6,index:i}),n.removeAttribute(c));if(xt.test(n.tagName)){const c=n.textContent.split(U),d=c.length-1;if(d>0){n.textContent=ke?ke.emptyScript:"";for(let f=0;f<d;f++)n.append(c[f],le()),X.nextNode(),u.push({type:2,index:++i});n.append(c[d],le())}}}else if(n.nodeType===8)if(n.data===wt)u.push({type:2,index:i});else{let c=-1;for(;(c=n.data.indexOf(U,c+1))!==-1;)u.push({type:7,index:i}),c+=U.length-1}i++}}static createElement(e,r){const o=W.createElement("template");return o.innerHTML=e,o}}function Z(t,e,r=t,o){if(e===G)return e;let n=o!==void 0?r._$Co?.[o]:r._$Cl;const i=ce(e)?void 0:e._$litDirective$;return n?.constructor!==i&&(n?._$AO?.(!1),i===void 0?n=void 0:(n=new i(t),n._$AT(t,r,o)),o!==void 0?(r._$Co??=[])[o]=n:r._$Cl=n),n!==void 0&&(e=Z(t,n._$AS(t,e.values),n,o)),e}class Ar{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:o}=this._$AD,n=(e?.creationScope??W).importNode(r,!0);X.currentNode=n;let i=X.nextNode(),s=0,a=0,u=o[0];for(;u!==void 0;){if(s===u.index){let h;u.type===2?h=new he(i,i.nextSibling,this,e):u.type===1?h=new u.ctor(i,u.name,u.strings,this,e):u.type===6&&(h=new Ir(i,this,e)),this._$AV.push(h),u=o[++a]}s!==u?.index&&(i=X.nextNode(),s++)}return X.currentNode=W,n}p(e){let r=0;for(const o of this._$AV)o!==void 0&&(o.strings!==void 0?(o._$AI(e,o,r),r+=o.strings.length-2):o._$AI(e[r])),r++}}class he{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,r,o,n){this.type=2,this._$AH=$,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=o,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&e?.nodeType===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Z(this,e,r),ce(e)?e===$||e==null||e===""?(this._$AH!==$&&this._$AR(),this._$AH=$):e!==this._$AH&&e!==G&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Cr(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==$&&ce(this._$AH)?this._$AA.nextSibling.data=e:this.T(W.createTextNode(e)),this._$AH=e}$(e){const{values:r,_$litType$:o}=e,n=typeof o=="number"?this._$AC(e):(o.el===void 0&&(o.el=de.createElement(Ct(o.h,o.h[0]),this.options)),o);if(this._$AH?._$AD===n)this._$AH.p(r);else{const i=new Ar(n,this),s=i.u(this.options);i.p(r),this.T(s),this._$AH=i}}_$AC(e){let r=St.get(e.strings);return r===void 0&&St.set(e.strings,r=new de(e)),r}k(e){Ve(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let o,n=0;for(const i of e)n===r.length?r.push(o=new he(this.O(le()),this.O(le()),this,this.options)):o=r[n],o._$AI(i),n++;n<r.length&&(this._$AR(o&&o._$AB.nextSibling,n),r.length=n)}_$AR(e=this._$AA.nextSibling,r){for(this._$AP?.(!1,!0,r);e!==this._$AB;){const o=e.nextSibling;e.remove(),e=o}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class Ae{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,o,n,i){this.type=1,this._$AH=$,this._$AN=void 0,this.element=e,this.name=r,this._$AM=n,this.options=i,o.length>2||o[0]!==""||o[1]!==""?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=$}_$AI(e,r=this,o,n){const i=this.strings;let s=!1;if(i===void 0)e=Z(this,e,r,0),s=!ce(e)||e!==this._$AH&&e!==G,s&&(this._$AH=e);else{const a=e;let u,h;for(e=i[0],u=0;u<i.length-1;u++)h=Z(this,a[o+u],r,u),h===G&&(h=this._$AH[u]),s||=!ce(h)||h!==this._$AH[u],h===$?e=$:e!==$&&(e+=(h??"")+i[u+1]),this._$AH[u]=h}s&&!n&&this.j(e)}j(e){e===$?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Tr extends Ae{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===$?void 0:e}}class Mr extends Ae{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==$)}}class Rr extends Ae{constructor(e,r,o,n,i){super(e,r,o,n,i),this.type=5}_$AI(e,r=this){if((e=Z(this,e,r,0)??$)===G)return;const o=this._$AH,n=e===$&&o!==$||e.capture!==o.capture||e.once!==o.once||e.passive!==o.passive,i=e!==$&&(o===$||n);n&&this.element.removeEventListener(this.name,this,o),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class Ir{constructor(e,r,o){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(e){Z(this,e)}}const Pr=We.litHtmlPolyfillSupport;Pr?.(de,he),(We.litHtmlVersions??=[]).push("3.3.1");const Nr=(t,e,r)=>{const o=r?.renderBefore??e;let n=o._$litPart$;if(n===void 0){const i=r?.renderBefore??null;o._$litPart$=n=new he(e.insertBefore(le(),i),i,void 0,r??{})}return n._$AI(t),n};const Xe=globalThis;let z=class extends Q{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Nr(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return G}};z._$litElement$=!0,z.finalized=!0,Xe.litElementHydrateSupport?.({LitElement:z});const Ur=Xe.litElementPolyfillSupport;Ur?.({LitElement:z}),(Xe.litElementVersions??=[]).push("4.2.1");const Te=t=>(e,r)=>{r!==void 0?r.addInitializer((()=>{customElements.define(t,e)})):customElements.define(t,e)};const zr={attribute:!0,type:String,converter:Ee,reflect:!1,hasChanged:qe},Dr=(t=zr,e,r)=>{const{kind:o,metadata:n}=r;let i=globalThis.litPropertyMetadata.get(n);if(i===void 0&&globalThis.litPropertyMetadata.set(n,i=new Map),o==="setter"&&((t=Object.create(t)).wrapped=!0),i.set(r.name,t),o==="accessor"){const{name:s}=r;return{set(a){const u=e.get.call(this);e.set.call(this,a),this.requestUpdate(s,u,t)},init(a){return a!==void 0&&this.C(s,void 0,t,a),a}}}if(o==="setter"){const{name:s}=r;return function(a){const u=this[s];e.call(this,a),this.requestUpdate(s,u,t)}}throw Error("Unsupported decorator location: "+o)};function x(t){return(e,r)=>typeof r=="object"?Dr(t,e,r):((o,n,i)=>{const s=n.hasOwnProperty(i);return n.constructor.createProperty(i,o),s?Object.getOwnPropertyDescriptor(n,i):void 0})(t,e,r)}function T(t){return x({...t,state:!0,attribute:!1})}const Or={CHILD:2},Lr=t=>(...e)=>({_$litDirective$:t,values:e});class Fr{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,o){this._$Ct=e,this._$AM=r,this._$Ci=o}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}class Ke extends Fr{constructor(e){if(super(e),this.it=$,e.type!==Or.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===$||e==null)return this._t=void 0,this.it=e;if(e===G)return e;if(typeof e!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.it)return this._t;this.it=e;const r=[e];return r.raw=r,this._t={_$litType$:this.constructor.resultType,strings:r,values:[]}}}Ke.directiveName="unsafeHTML",Ke.resultType=1;const Et=Lr(Ke),jr='html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}:host{font-family:var( --wafir-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif );font-size:var(--wafir-font-size, 14px);text-align:left;color:var(--wafir-text-color, #111827);line-height:1.5}.trigger-container{position:fixed;z-index:9998}.trigger-container.bottom-right{bottom:var(--wafir-button-offset, 20px);right:var(--wafir-button-offset, 20px)}.trigger-container.bottom-left{bottom:var(--wafir-button-offset, 20px);left:var(--wafir-button-offset, 20px)}.trigger-container.top-right{top:var(--wafir-button-offset, 20px);right:var(--wafir-button-offset, 20px)}.trigger-container.top-left{top:var(--wafir-button-offset, 20px);left:var(--wafir-button-offset, 20px)}button[part=button]{width:var(--wafir-button-size, 48px);height:var(--wafir-button-size, 48px);border-radius:var(--wafir-button-border-radius, 50%);background:var(--wafir-primary-color, #2563eb);border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:var(--wafir-button-shadow, 0 4px 12px rgba(0, 0, 0, .15));transition:all .2s ease}button[part=button]:hover{background:var(--wafir-primary-hover, #1d4ed8);transform:scale(1.05);box-shadow:var(--wafir-button-shadow-hover, 0 6px 16px rgba(0, 0, 0, .2))}button[part=button] span{display:flex;align-items:center;justify-content:center;width:var(--wafir-button-icon-size, 24px);height:var(--wafir-button-icon-size, 24px)}button[part=button] svg{width:var(--wafir-button-icon-size, 24px);height:var(--wafir-button-icon-size, 24px);stroke:#fff}.tooltip{position:absolute;bottom:60px;right:0;background:var(--wafir-tooltip-bg, #1f2937);color:#fff;padding:6px 10px;border-radius:6px;font-size:12px;white-space:nowrap;opacity:0;pointer-events:none;transition:opacity .2s ease}.trigger-container:hover .tooltip{opacity:1}.modal-backdrop{position:fixed;inset:0;background:var(--wafir-backdrop-color, rgba(0, 0, 0, .5));display:flex;align-items:center;justify-content:center;z-index:9999;animation:fadeIn .2s ease}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.modal-content{background:var(--wafir-modal-bg, white);border-radius:var(--wafir-modal-border-radius, 12px);width:90%;max-width:var(--wafir-modal-max-width, 800px);max-height:90vh;overflow-y:auto;box-shadow:var(--wafir-modal-shadow, 0 20px 60px rgba(0, 0, 0, .3));animation:slideUp .3s ease}@keyframes slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header{display:flex;justify-content:space-between;align-items:center;padding:var(--wafir-modal-padding, 20px);border-bottom:1px solid var(--wafir-border-color, #e5e7eb)}.modal-header h3{margin:0;font-size:var(--wafir-modal-title-font-size, 18px);font-weight:var(--wafir-modal-title-font-weight, 600);color:var(--wafir-modal-title-color, var(--wafir-text-color, #111827))}.close-button{background:none;border:none;font-size:28px;color:var(--wafir-text-secondary, #6b7280);cursor:pointer;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:6px;transition:all .2s ease}.close-button:hover{background:#f3f4f6;color:var(--wafir-text-color, #111827)}.mode-tabs{display:flex;gap:0;border-bottom:1px solid var(--wafir-border-color, #e5e7eb)}.mode-tab{flex:1;display:flex;align-items:center;justify-content:center;gap:8px;padding:12px 16px;background:transparent;border:none;border-bottom:2px solid transparent;cursor:pointer;font-size:14px;font-weight:500;color:var(--wafir-text-secondary, #6b7280);transition:all .2s ease}.mode-tab:hover{background:var(--wafir-form-bg-tertiary, #f9fafb);color:var(--wafir-text-color, #111827)}.mode-tab.active{color:var(--wafir-primary-color, #2563eb);border-bottom-color:var(--wafir-primary-color, #2563eb)}.mode-tab svg{width:18px;height:18px;stroke:currentColor}',Br='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bug-icon lucide-bug"><path d="M12 20v-9"/><path d="M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z"/><path d="M14.12 3.88 16 2"/><path d="M21 21a4 4 0 0 0-3.81-4"/><path d="M21 5a4 4 0 0 1-3.55 3.97"/><path d="M22 13h-4"/><path d="M3 21a4 4 0 0 1 3.81-4"/><path d="M3 5a4 4 0 0 0 3.55 3.97"/><path d="M6 13H2"/><path d="m8 2 1.88 1.88"/><path d="M9 7.13V6a3 3 0 1 1 6 0v1.13"/></svg>',kt=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r
<svg\r
   width="24"\r
   height="24"\r
   viewBox="0 0 24 24"\r
   fill="none"\r
   stroke="currentColor"\r
   stroke-width="2"\r
   stroke-linecap="round"\r
   stroke-linejoin="round"\r
   class="lucide lucide-message-square-icon lucide-message-square"\r
   version="1.1"\r
   id="svg1"\r
   sodipodi:docname="thumbsup.svg"\r
   inkscape:version="1.4.2 (f4327f4, 2025-05-13)"\r
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\r
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r
   xmlns="http://www.w3.org/2000/svg"\r
   xmlns:svg="http://www.w3.org/2000/svg">\r
  <defs\r
     id="defs1" />\r
  <sodipodi:namedview\r
     id="namedview1"\r
     pagecolor="#ffffff"\r
     bordercolor="#000000"\r
     borderopacity="0.25"\r
     inkscape:showpageshadow="2"\r
     inkscape:pageopacity="0.0"\r
     inkscape:pagecheckerboard="0"\r
     inkscape:deskcolor="#d1d1d1"\r
     inkscape:zoom="77.541667"\r
     inkscape:cx="12"\r
     inkscape:cy="12"\r
     inkscape:window-width="3840"\r
     inkscape:window-height="2126"\r
     inkscape:window-x="3829"\r
     inkscape:window-y="-11"\r
     inkscape:window-maximized="1"\r
     inkscape:current-layer="svg1" />\r
  <path\r
     d="M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z"\r
     id="path1" />\r
  <path\r
     d="M 13.373895,7.8707208 12.88154,9.8992235 h 2.870429 a 0.98471004,0.98471004 0 0 1 0.945322,1.2604285 l -1.147188,3.938841 a 0.98471004,0.98471004 0 0 1 -0.945321,0.708991 H 7.9579893 a 0.98471004,0.98471004 0 0 1 -0.9847101,-0.98471 v -3.93884 A 0.98471004,0.98471004 0 0 1 7.9579893,9.8992235 H 9.3168891 A 0.98471004,0.98471004 0 0 0 10.198205,9.3527094 l 1.698624,-3.392326 a 1.5410712,1.5410712 0 0 1 1.477066,1.9103374 z"\r
     id="path1-8"\r
     style="stroke-width:0.98471" />\r
  <path\r
     d="M 9.4350543,9.8992235 V 15.807484"\r
     id="path2"\r
     style="stroke-width:0.98471" />\r
</svg>\r
`,Hr=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>\r
`,qr="html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}:host{display:block;color:var(--wafir-form-text-color, #374151);background-color:var(--wafir-form-bg, transparent);line-height:1.5}form{padding:var(--wafir-form-padding, 20px)}.form-group{margin-bottom:16px}label{display:block;margin-bottom:6px;font-weight:500;color:var(--wafir-form-text-color, #374151);font-size:13px}input,textarea,select{width:100%;padding:var(--wafir-form-input-padding, 10px 12px);border:1px solid var(--wafir-form-border-color, #d1d5db);border-radius:var(--wafir-form-border-radius, 6px);font-size:14px;box-sizing:border-box;font-family:inherit;color:var(--wafir-form-input-color, #111827);background-color:var(--wafir-form-input-bg, #ffffff)}textarea{min-height:80px;resize:vertical}.checkbox-group{display:flex;align-items:center;gap:8px}.checkbox-group input{width:auto}.checkbox-group label{margin-bottom:0}.submit-button{width:100%;padding:10px;background:var(--wafir-form-primary-color, #2563eb);color:#fff;border:none;border-radius:var(--wafir-form-border-radius, 6px);font-size:14px;font-weight:500;cursor:pointer;margin-top:8px}.submit-button:hover{background:var(--wafir-form-primary-hover, #1d4ed8)}.submit-button:disabled{background:var(--wafir-form-disabled-color, #9ca3af);cursor:not-allowed}.spinner{display:inline-block;width:14px;height:14px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:spin .8s linear infinite;vertical-align:middle;margin-right:6px}@keyframes spin{to{transform:rotate(360deg)}}.screenshot-preview{margin-top:8px;position:relative;border:1px solid var(--wafir-form-border-color, #d1d5db);border-radius:var(--wafir-form-border-radius, 6px);overflow:hidden;max-height:200px;display:flex;justify-content:center;background:var(--wafir-form-bg-tertiary, #f9fafb)}.screenshot-preview img{max-width:100%;height:auto;object-fit:contain}.screenshot-clear{position:absolute;top:5px;right:5px;background:#00000080;color:#fff;border:none;border-radius:50%;width:24px;height:24px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:16px}.capture-button{display:flex;align-items:center;justify-content:center;gap:8px;width:100%;padding:8px;background:var(--wafir-form-bg-secondary, #f3f4f6);border:1px dashed var(--wafir-form-border-color, #d1d5db);border-radius:var(--wafir-form-border-radius, 6px);font-size:13px;cursor:pointer;color:var(--wafir-form-text-color, #374151);transition:all .2s}.capture-button:hover{background:#e5e7eb;border-color:var(--wafir-form-disabled-color, #9ca3af)}.screenshot-actions{display:flex;gap:8px;margin-top:8px}.screenshot-actions button{flex:1;padding:6px;font-size:12px;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:4px;border:1px solid var(--wafir-form-border-color, #d1d5db);background:var(--wafir-form-bg-tertiary, #f9fafb)}.screenshot-actions button:hover{background:var(--wafir-form-bg-secondary, #f3f4f6)}.screenshot-actions .highlight-btn{color:var(--wafir-form-primary-color, #2563eb);border-color:var(--wafir-form-primary-color, #2563eb);background:#eff6ff}.screenshot-actions .highlight-btn:hover{background:#dbeafe}.telemetry-section{margin-top:16px;padding:12px;background:var(--wafir-form-telemetry-bg, #f9fafb);border:1px solid var(--wafir-form-telemetry-border, #e5e7eb);border-radius:var(--wafir-form-border-radius, 6px);font-size:12px;color:#4b5563}.telemetry-section h4{margin:0 0 8px;font-size:13px;color:var(--wafir-form-text-color, #374151);font-weight:600}.telemetry-grid{display:grid;grid-template-columns:auto 1fr;gap:4px 12px}.telemetry-label{font-weight:500;color:var(--wafir-form-text-secondary, #6b7280)}.logs-container{max-height:150px;overflow-y:auto;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:11px;background:var(--wafir-form-logs-bg, #111827);color:var(--wafir-form-logs-text, #f3f4f6);padding:8px;border-radius:4px}.log-item{margin-bottom:4px;word-break:break-all}.log-warn{color:var(--wafir-form-log-warn, #fde047)}.log-error{color:var(--wafir-form-log-error, #f87171)}.switch-container{display:flex;background:var(--wafir-form-bg-secondary, #f3f4f6);border-radius:var(--wafir-form-border-radius, 6px);padding:4px;gap:4px}.switch-option{flex:1;padding:8px 16px;border:none;border-radius:calc(var(--wafir-form-border-radius, 6px) - 2px);font-size:13px;font-weight:500;cursor:pointer;background:transparent;color:var(--wafir-form-text-secondary, #6b7280);transition:all .2s ease}.switch-option:hover:not(.active){color:var(--wafir-form-text-color, #374151)}.switch-option.active{background:var(--wafir-form-input-bg, #ffffff);color:var(--wafir-form-primary-color, #2563eb);box-shadow:0 1px 3px #0000001a}",Wr=".star-rating{display:inline-flex;align-items:center;gap:4px}.star-rating.readonly{pointer-events:none}.star{background:none;border:none;padding:4px;cursor:pointer;color:var(--wafir-star-empty-color, #d1d5db);transition:transform .15s ease,color .15s ease;display:flex;align-items:center;justify-content:center}.star:hover:not(:disabled){transform:scale(1.15)}.star:focus-visible{outline:2px solid var(--wafir-primary-color, #2563eb);outline-offset:2px;border-radius:4px}.star svg{width:var(--wafir-star-size, 28px);height:var(--wafir-star-size, 28px);transition:fill .15s ease}.star.filled,.star.active{color:var(--wafir-star-color, #fbbf24)}.star:disabled{cursor:default;opacity:.8}.rating-text{margin-left:8px;font-size:14px;color:var(--wafir-text-secondary, #6b7280);font-weight:500}@keyframes star-pop{0%{transform:scale(1)}50%{transform:scale(1.3)}to{transform:scale(1)}}.star.active{animation:star-pop .3s ease}",Vr=[{id:"feedback",label:"Feedback",icon:"thumbsup"},{id:"suggestion",label:"Suggestion",icon:"lightbulb"},{id:"issue",label:"Issue",icon:"bug"}],At=["Very Unsatisfied","Unsatisfied","Neither satisfied or unsatisfied","Satisfied","Very Satisfied"],Gr=[{id:"rating",label:"How satisfied are you with our website?",type:"rating",required:!0,ratingLabels:At},{id:"description",label:"What is the main reason for this rating?",type:"textarea",required:!1}],Xr=[{id:"title",label:"What is your suggestion?",type:"text",required:!0},{id:"description",label:"Additional information:",type:"textarea",required:!1}],Kr=[{id:"title",label:"What issue did you encounter?",type:"text",required:!0},{id:"description",label:"Additional information:",type:"textarea",required:!1}];function Yr(){return{feedback:[...Gr],suggestion:[...Xr],issue:[...Kr]}}var Jr=Object.defineProperty,Qr=Object.getOwnPropertyDescriptor,ee=(t,e,r,o)=>{for(var n=o>1?void 0:o?Qr(e,r):e,i=t.length-1,s;i>=0;i--)(s=t[i])&&(n=(o?s(e,r,n):s(n))||n);return o&&n&&Jr(e,r,n),n};let D=class extends z{constructor(){super(...arguments),this.value=0,this.max=5,this.readonly=!1,this.labels=At,this._hoverValue=0}_handleClick(t){this.readonly||(this.value=t,this.dispatchEvent(new CustomEvent("rating-change",{detail:{value:t},bubbles:!0,composed:!0})))}_handleMouseEnter(t){this.readonly||(this._hoverValue=t)}_handleMouseLeave(){this._hoverValue=0}_handleKeyDown(t,e){if(!this.readonly){if(t.key==="Enter"||t.key===" ")t.preventDefault(),this._handleClick(e);else if(t.key==="ArrowRight"||t.key==="ArrowUp"){t.preventDefault();const r=Math.min(this.value+1,this.max);this._handleClick(r)}else if(t.key==="ArrowLeft"||t.key==="ArrowDown"){t.preventDefault();const r=Math.max(this.value-1,1);this._handleClick(r)}}}_getLabelForRating(t){return this.labels&&this.labels[t-1]?this.labels[t-1]:`${t} star${t!==1?"s":""}`}render(){const t=this._hoverValue||this.value,e=this._hoverValue>0?this._getLabelForRating(this._hoverValue):"";return w`
      <div
        class="star-rating ${this.readonly?"readonly":""}"
        role="radiogroup"
        aria-label="Rating"
        @mouseleave="${this._handleMouseLeave}"
      >
        ${Array.from({length:this.max},(r,o)=>{const n=o+1,i=n<=t,s=n<=this.value;return w`
            <button
              type="button"
              class="star ${i?"filled":""} ${s?"active":""}"
              role="radio"
              aria-checked="${s}"
              aria-label="${this._getLabelForRating(n)}"
              tabindex="${n===1||n===this.value?0:-1}"
              ?disabled="${this.readonly}"
              @click="${()=>this._handleClick(n)}"
              @mouseenter="${()=>this._handleMouseEnter(n)}"
              @keydown="${a=>this._handleKeyDown(a,n)}"
            >
              <svg
                viewBox="0 0 24 24"
                fill="${i?"currentColor":"none"}"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                />
              </svg>
            </button>
          `})}
        ${e?w`<span class="rating-text hover-label">${e}</span>`:this.value>0?w`<span class="rating-text"
                >${this._getLabelForRating(this.value)}</span
              >`:""}
      </div>
    `}};D.styles=[se(Wr)],ee([x({type:Number})],D.prototype,"value",2),ee([x({type:Number})],D.prototype,"max",2),ee([x({type:Boolean})],D.prototype,"readonly",2),ee([x({type:Array})],D.prototype,"labels",2),ee([T()],D.prototype,"_hoverValue",2),D=ee([Te("wafir-star-rating")],D);var Ye={},fe={},Tt;function Zr(){if(Tt)return fe;Tt=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.StoreController=void 0;let t=class{constructor(r,o){this.host=r,this.atom=o,r.addController(this)}hostConnected(){this.unsubscribe=this.atom.subscribe(()=>{this.host.requestUpdate()})}hostDisconnected(){var r;(r=this.unsubscribe)===null||r===void 0||r.call(this)}get value(){return this.atom.get()}};return fe.StoreController=t,fe}var pe={},Mt;function Je(){if(Mt)return pe;Mt=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.MultiStoreController=void 0;let t=class{constructor(r,o){this.host=r,this.atoms=o,r.addController(this)}hostConnected(){this.unsubscribes=this.atoms.map(r=>r.subscribe(()=>this.host.requestUpdate()))}hostDisconnected(){var r;(r=this.unsubscribes)===null||r===void 0||r.forEach(o=>o())}get values(){return this.atoms.map(r=>r.get())}};return pe.MultiStoreController=t,pe}var ge={},Rt;function eo(){if(Rt)return ge;Rt=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.useStores=void 0;const t=Je();function e(...r){return o=>class extends o{constructor(...n){super(...n),new t.MultiStoreController(this,r)}}}return ge.useStores=e,ge}var me={},It;function to(){if(It)return me;It=1,Object.defineProperty(me,"__esModule",{value:!0}),me.withStores=void 0;const t=Je(),e=(r,o)=>class extends r{constructor(...i){super(...i),new t.MultiStoreController(this,o)}};return me.withStores=e,me}var Pt;function ro(){return Pt||(Pt=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.withStores=t.useStores=t.MultiStoreController=t.StoreController=void 0;var e=Zr();Object.defineProperty(t,"StoreController",{enumerable:!0,get:function(){return e.StoreController}});var r=Je();Object.defineProperty(t,"MultiStoreController",{enumerable:!0,get:function(){return r.MultiStoreController}});var o=eo();Object.defineProperty(t,"useStores",{enumerable:!0,get:function(){return o.useStores}});var n=to();Object.defineProperty(t,"withStores",{enumerable:!0,get:function(){return n.withStores}})})(Ye)),Ye}var N=ro();let M=[],O=0;const Me=4,K=t=>{let e=[],r={get(){return r.lc||r.listen(()=>{})(),r.value},lc:0,listen(o){return r.lc=e.push(o),()=>{for(let i=O+Me;i<M.length;)M[i]===o?M.splice(i,Me):i+=Me;let n=e.indexOf(o);~n&&(e.splice(n,1),--r.lc||r.off())}},notify(o,n){let i=!M.length;for(let s of e)M.push(s,r.value,o,n);if(i){for(O=0;O<M.length;O+=Me)M[O](M[O+1],M[O+2],M[O+3]);M.length=0}},off(){},set(o){let n=r.value;n!==o&&(r.value=o,r.notify(n))},subscribe(o){let n=r.listen(o);return o(r.value),n},value:t};return r},Y=K(!1),Re=K(!1),Ie=K(null),te=K(null),L=K({}),be=K(null),we=K([]),oo=()=>{Y.set(!0)},Nt=()=>{Y.set(!1),te.set(null)},Ut=t=>{Ie.set(t)},Pe=t=>{L.set(t)},no=t=>{be.set(t)},io=t=>{we.set(t)},zt=()=>{L.set({}),Ie.set(null),Y.set(!1),Re.set(!1),te.set(null),be.set(null),we.set([])};function so(t,e){return t[13]=1,t[14]=e>>8,t[15]=e&255,t[16]=e>>8,t[17]=e&255,t}const Dt=112,Ot=72,Lt=89,Ft=115;let Qe;function ao(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function lo(t){let e=-1;Qe||(Qe=ao());for(let r=0;r<t.length;r++)e=Qe[(e^t[r])&255]^e>>>8;return e^-1}function co(t){const e=t.length-1;for(let r=e;r>=4;r--)if(t[r-4]===9&&t[r-3]===Dt&&t[r-2]===Ot&&t[r-1]===Lt&&t[r]===Ft)return r-3;return 0}function uo(t,e,r=!1){const o=new Uint8Array(13);e*=39.3701,o[0]=Dt,o[1]=Ot,o[2]=Lt,o[3]=Ft,o[4]=e>>>24,o[5]=e>>>16,o[6]=e>>>8,o[7]=e&255,o[8]=o[4],o[9]=o[5],o[10]=o[6],o[11]=o[7],o[12]=1;const n=lo(o),i=new Uint8Array(4);if(i[0]=n>>>24,i[1]=n>>>16,i[2]=n>>>8,i[3]=n&255,r){const s=co(t);return t.set(o,s),t.set(i,s+13),t}else{const s=new Uint8Array(4);s[0]=0,s[1]=0,s[2]=0,s[3]=9;const a=new Uint8Array(54);return a.set(t,0),a.set(s,33),a.set(o,37),a.set(i,50),a}}const ho="AAlwSFlz",fo="AAAJcEhZ",po="AAAACXBI";function go(t){let e=t.indexOf(ho);return e===-1&&(e=t.indexOf(fo)),e===-1&&(e=t.indexOf(po)),e}const jt="[modern-screenshot]",F=typeof window<"u",mo=F&&"Worker"in window,bo=F&&"atob"in window,wo=F&&"btoa"in window,Ze=F?window.navigator?.userAgent:"",Bt=Ze.includes("Chrome"),Ne=Ze.includes("AppleWebKit")&&!Bt,et=Ze.includes("Firefox"),yo=t=>t&&"__CONTEXT__"in t,vo=t=>t.constructor.name==="CSSFontFaceRule",_o=t=>t.constructor.name==="CSSImportRule",P=t=>t.nodeType===1,ye=t=>typeof t.className=="object",Ht=t=>t.tagName==="image",$o=t=>t.tagName==="use",ve=t=>P(t)&&typeof t.style<"u"&&!ye(t),xo=t=>t.nodeType===8,So=t=>t.nodeType===3,re=t=>t.tagName==="IMG",Ue=t=>t.tagName==="VIDEO",Co=t=>t.tagName==="CANVAS",Eo=t=>t.tagName==="TEXTAREA",ko=t=>t.tagName==="INPUT",Ao=t=>t.tagName==="STYLE",To=t=>t.tagName==="SCRIPT",Mo=t=>t.tagName==="SELECT",Ro=t=>t.tagName==="SLOT",Io=t=>t.tagName==="IFRAME",Po=(...t)=>console.warn(jt,...t);function No(t){const e=t?.createElement?.("canvas");return e&&(e.height=e.width=1),!!e&&"toDataURL"in e&&!!e.toDataURL("image/webp").includes("image/webp")}const tt=t=>t.startsWith("data:");function qt(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(F&&t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i)||!F)return t;const r=ze().implementation.createHTMLDocument(),o=r.createElement("base"),n=r.createElement("a");return r.head.appendChild(o),r.body.appendChild(n),e&&(o.href=e),n.href=t,n.href}function ze(t){return(t&&P(t)?t?.ownerDocument:t)??window.document}const De="http://www.w3.org/2000/svg";function Uo(t,e,r){const o=ze(r).createElementNS(De,"svg");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"viewBox",`0 0 ${t} ${e}`),o}function zo(t,e){let r=new XMLSerializer().serializeToString(t);return e&&(r=r.replace(/[\u0000-\u0008\v\f\u000E-\u001F\uD800-\uDFFF\uFFFE\uFFFF]/gu,"")),`data:image/svg+xml;charset=utf-8,${encodeURIComponent(r)}`}function Do(t,e){return new Promise((r,o)=>{const n=new FileReader;n.onload=()=>r(n.result),n.onerror=()=>o(n.error),n.onabort=()=>o(new Error(`Failed read blob to ${e}`)),n.readAsDataURL(t)})}const Oo=t=>Do(t,"dataUrl");function oe(t,e){const r=ze(e).createElement("img");return r.decoding="sync",r.loading="eager",r.src=t,r}function _e(t,e){return new Promise(r=>{const{timeout:o,ownerDocument:n,onError:i,onWarn:s}=e??{},a=typeof t=="string"?oe(t,ze(n)):t;let u=null,h=null;function l(){r(a),u&&clearTimeout(u),h?.()}if(o&&(u=setTimeout(l,o)),Ue(a)){const c=a.currentSrc||a.src;if(!c)return a.poster?_e(a.poster,e).then(r):l();if(a.readyState>=2)return l();const d=l,f=m=>{s?.("Failed video load",c,m),i?.(m),l()};h=()=>{a.removeEventListener("loadeddata",d),a.removeEventListener("error",f)},a.addEventListener("loadeddata",d,{once:!0}),a.addEventListener("error",f,{once:!0})}else{const c=Ht(a)?a.href.baseVal:a.currentSrc||a.src;if(!c)return l();const d=async()=>{if(re(a)&&"decode"in a)try{await a.decode()}catch(m){s?.("Failed to decode image, trying to render anyway",a.dataset.originalSrc||c,m)}l()},f=m=>{s?.("Failed image load",a.dataset.originalSrc||c,m),l()};if(re(a)&&a.complete)return d();h=()=>{a.removeEventListener("load",d),a.removeEventListener("error",f)},a.addEventListener("load",d,{once:!0}),a.addEventListener("error",f,{once:!0})}})}async function Lo(t,e){ve(t)&&(re(t)||Ue(t)?await _e(t,e):await Promise.all(["img","video"].flatMap(r=>Array.from(t.querySelectorAll(r)).map(o=>_e(o,e)))))}const Wt=(function(){let e=0;const r=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${r()}${e}`)})();function Vt(t){return t?.split(",").map(e=>e.trim().replace(/"|'/g,"").toLowerCase()).filter(Boolean)}let Gt=0;function Fo(t){const e=`${jt}[#${Gt}]`;return Gt++,{time:r=>t&&console.time(`${e} ${r}`),timeEnd:r=>t&&console.timeEnd(`${e} ${r}`),warn:(...r)=>t&&Po(...r)}}function jo(t){return{cache:t?"no-cache":"force-cache"}}async function rt(t,e){return yo(t)?t:Bo(t,{...e,autoDestruct:!0})}async function Bo(t,e){const{scale:r=1,workerUrl:o,workerNumber:n=1}=e||{},i=!!e?.debug,s=e?.features??!0,a=t.ownerDocument??(F?window.document:void 0),u=t.ownerDocument?.defaultView??(F?window:void 0),h=new Map,l={width:0,height:0,quality:1,type:"image/png",scale:r,backgroundColor:null,style:null,filter:null,maximumCanvasSize:0,timeout:3e4,progress:null,debug:i,fetch:{requestInit:jo(e?.fetch?.bypassingCache),placeholderImage:"data:image/png;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",bypassingCache:!1,...e?.fetch},fetchFn:null,font:{},drawImageInterval:100,workerUrl:null,workerNumber:n,onCloneEachNode:null,onCloneNode:null,onEmbedNode:null,onCreateForeignObjectSvg:null,includeStyleProperties:null,autoDestruct:!1,...e,__CONTEXT__:!0,log:Fo(i),node:t,ownerDocument:a,ownerWindow:u,dpi:r===1?null:96*r,svgStyleElement:Xt(a),svgDefsElement:a?.createElementNS(De,"defs"),svgStyles:new Map,defaultComputedStyles:new Map,workers:[...Array.from({length:mo&&o&&n?n:0})].map(()=>{try{const f=new Worker(o);return f.onmessage=async m=>{const{url:p,result:b}=m.data;b?h.get(p)?.resolve?.(b):h.get(p)?.reject?.(new Error(`Error receiving message from worker: ${p}`))},f.onmessageerror=m=>{const{url:p}=m.data;h.get(p)?.reject?.(new Error(`Error receiving message from worker: ${p}`))},f}catch(f){return l.log.warn("Failed to new Worker",f),null}}).filter(Boolean),fontFamilies:new Map,fontCssTexts:new Map,acceptOfImage:`${[No(a)&&"image/webp","image/svg+xml","image/*","*/*"].filter(Boolean).join(",")};q=0.8`,requests:h,drawImageCount:0,tasks:[],features:s,isEnable:f=>f==="restoreScrollPosition"?typeof s=="boolean"?!1:s[f]??!1:typeof s=="boolean"?s:s[f]??!0,shadowRoots:[]};l.log.time("wait until load"),await Lo(t,{timeout:l.timeout,onWarn:l.log.warn}),l.log.timeEnd("wait until load");const{width:c,height:d}=Ho(t,l);return l.width=c,l.height=d,l}function Xt(t){if(!t)return;const e=t.createElement("style"),r=e.ownerDocument.createTextNode(`
.______background-clip--text {
  background-clip: text;
  -webkit-background-clip: text;
}
`);return e.appendChild(r),e}function Ho(t,e){let{width:r,height:o}=e;if(P(t)&&(!r||!o)){const n=t.getBoundingClientRect();r=r||n.width||Number(t.getAttribute("width"))||0,o=o||n.height||Number(t.getAttribute("height"))||0}return{width:r,height:o}}async function qo(t,e){const{log:r,timeout:o,drawImageCount:n,drawImageInterval:i}=e;r.time("image to canvas");const s=await _e(t,{timeout:o,onWarn:e.log.warn}),{canvas:a,context2d:u}=Wo(t.ownerDocument,e),h=()=>{try{u?.drawImage(s,0,0,a.width,a.height)}catch(l){e.log.warn("Failed to drawImage",l)}};if(h(),e.isEnable("fixSvgXmlDecode"))for(let l=0;l<n;l++)await new Promise(c=>{setTimeout(()=>{u?.clearRect(0,0,a.width,a.height),h(),c()},l+i)});return e.drawImageCount=0,r.timeEnd("image to canvas"),a}function Wo(t,e){const{width:r,height:o,scale:n,backgroundColor:i,maximumCanvasSize:s}=e,a=t.createElement("canvas");a.width=Math.floor(r*n),a.height=Math.floor(o*n),a.style.width=`${r}px`,a.style.height=`${o}px`,s&&(a.width>s||a.height>s)&&(a.width>s&&a.height>s?a.width>a.height?(a.height*=s/a.width,a.width=s):(a.width*=s/a.height,a.height=s):a.width>s?(a.height*=s/a.width,a.width=s):(a.width*=s/a.height,a.height=s));const u=a.getContext("2d");return u&&i&&(u.fillStyle=i,u.fillRect(0,0,a.width,a.height)),{canvas:a,context2d:u}}function Kt(t,e){if(t.ownerDocument)try{const i=t.toDataURL();if(i!=="data:,")return oe(i,t.ownerDocument)}catch(i){e.log.warn("Failed to clone canvas",i)}const r=t.cloneNode(!1),o=t.getContext("2d"),n=r.getContext("2d");try{return o&&n&&n.putImageData(o.getImageData(0,0,t.width,t.height),0,0),r}catch(i){e.log.warn("Failed to clone canvas",i)}return r}function Vo(t,e){try{if(t?.contentDocument?.body)return ot(t.contentDocument.body,e)}catch(r){e.log.warn("Failed to clone iframe",r)}return t.cloneNode(!1)}function Go(t){const e=t.cloneNode(!1);return t.currentSrc&&t.currentSrc!==t.src&&(e.src=t.currentSrc,e.srcset=""),e.loading==="lazy"&&(e.loading="eager"),e}async function Xo(t,e){if(t.ownerDocument&&!t.currentSrc&&t.poster)return oe(t.poster,t.ownerDocument);const r=t.cloneNode(!1);r.crossOrigin="anonymous",t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc);const o=r.ownerDocument;if(o){let n=!0;if(await _e(r,{onError:()=>n=!1,onWarn:e.log.warn}),!n)return t.poster?oe(t.poster,t.ownerDocument):r;r.currentTime=t.currentTime,await new Promise(s=>{r.addEventListener("seeked",s,{once:!0})});const i=o.createElement("canvas");i.width=t.offsetWidth,i.height=t.offsetHeight;try{const s=i.getContext("2d");s&&s.drawImage(r,0,0,i.width,i.height)}catch(s){return e.log.warn("Failed to clone video",s),t.poster?oe(t.poster,t.ownerDocument):r}return Kt(i,e)}return r}function Ko(t,e){return Co(t)?Kt(t,e):Io(t)?Vo(t,e):re(t)?Go(t):Ue(t)?Xo(t,e):t.cloneNode(!1)}function Yo(t){let e=t.sandbox;if(!e){const{ownerDocument:r}=t;try{r&&(e=r.createElement("iframe"),e.id=`__SANDBOX__${Wt()}`,e.width="0",e.height="0",e.style.visibility="hidden",e.style.position="fixed",r.body.appendChild(e),e.srcdoc='<!DOCTYPE html><meta charset="UTF-8"><title></title><body>',t.sandbox=e)}catch(o){t.log.warn("Failed to getSandBox",o)}}return e}const Jo=["width","height","-webkit-text-fill-color"],Qo=["stroke","fill"];function Yt(t,e,r){const{defaultComputedStyles:o}=r,n=t.nodeName.toLowerCase(),i=ye(t)&&n!=="svg",s=i?Qo.map(p=>[p,t.getAttribute(p)]).filter(([,p])=>p!==null):[],a=[i&&"svg",n,s.map((p,b)=>`${p}=${b}`).join(","),e].filter(Boolean).join(":");if(o.has(a))return o.get(a);const h=Yo(r)?.contentWindow;if(!h)return new Map;const l=h?.document;let c,d;i?(c=l.createElementNS(De,"svg"),d=c.ownerDocument.createElementNS(c.namespaceURI,n),s.forEach(([p,b])=>{d.setAttributeNS(null,p,b)}),c.appendChild(d)):c=d=l.createElement(n),d.textContent=" ",l.body.appendChild(c);const f=h.getComputedStyle(d,e),m=new Map;for(let p=f.length,b=0;b<p;b++){const g=f.item(b);Jo.includes(g)||m.set(g,f.getPropertyValue(g))}return l.body.removeChild(c),o.set(a,m),m}function Jt(t,e,r){const o=new Map,n=[],i=new Map;if(r)for(const a of r)s(a);else for(let a=t.length,u=0;u<a;u++){const h=t.item(u);s(h)}for(let a=n.length,u=0;u<a;u++)i.get(n[u])?.forEach((h,l)=>o.set(l,h));function s(a){const u=t.getPropertyValue(a),h=t.getPropertyPriority(a),l=a.lastIndexOf("-"),c=l>-1?a.substring(0,l):void 0;if(c){let d=i.get(c);d||(d=new Map,i.set(c,d)),d.set(a,[u,h])}e.get(a)===u&&!h||(c?n.push(c):o.set(a,[u,h]))}return o}function Zo(t,e,r,o){const{ownerWindow:n,includeStyleProperties:i,currentParentNodeStyle:s}=o,a=e.style,u=n.getComputedStyle(t),h=Yt(t,null,o);s?.forEach((c,d)=>{h.delete(d)});const l=Jt(u,h,i);l.delete("transition-property"),l.delete("all"),l.delete("d"),l.delete("content"),r&&(l.delete("margin-top"),l.delete("margin-right"),l.delete("margin-bottom"),l.delete("margin-left"),l.delete("margin-block-start"),l.delete("margin-block-end"),l.delete("margin-inline-start"),l.delete("margin-inline-end"),l.set("box-sizing",["border-box",""])),l.get("background-clip")?.[0]==="text"&&e.classList.add("______background-clip--text"),Bt&&(l.has("font-kerning")||l.set("font-kerning",["normal",""]),(l.get("overflow-x")?.[0]==="hidden"||l.get("overflow-y")?.[0]==="hidden")&&l.get("text-overflow")?.[0]==="ellipsis"&&t.scrollWidth===t.clientWidth&&l.set("text-overflow",["clip",""]));for(let c=a.length,d=0;d<c;d++)a.removeProperty(a.item(d));return l.forEach(([c,d],f)=>{a.setProperty(f,c,d)}),l}function en(t,e){(Eo(t)||ko(t)||Mo(t))&&e.setAttribute("value",t.value)}const tn=["::before","::after"],rn=["::-webkit-scrollbar","::-webkit-scrollbar-button","::-webkit-scrollbar-thumb","::-webkit-scrollbar-track","::-webkit-scrollbar-track-piece","::-webkit-scrollbar-corner","::-webkit-resizer"];function on(t,e,r,o,n){const{ownerWindow:i,svgStyleElement:s,svgStyles:a,currentNodeStyle:u}=o;if(!s||!i)return;function h(l){const c=i.getComputedStyle(t,l);let d=c.getPropertyValue("content");if(!d||d==="none")return;n?.(d),d=d.replace(/(')|(")|(counter\(.+\))/g,"");const f=[Wt()],m=Yt(t,l,o);u?.forEach((y,k)=>{m.delete(k)});const p=Jt(c,m,o.includeStyleProperties);p.delete("content"),p.delete("-webkit-locale"),p.get("background-clip")?.[0]==="text"&&e.classList.add("______background-clip--text");const b=[`content: '${d}';`];if(p.forEach(([y,k],R)=>{b.push(`${R}: ${y}${k?" !important":""};`)}),b.length===1)return;try{e.className=[e.className,...f].join(" ")}catch(y){o.log.warn("Failed to copyPseudoClass",y);return}const g=b.join(`
  `);let _=a.get(g);_||(_=[],a.set(g,_)),_.push(`.${f[0]}${l}`)}tn.forEach(h),r&&rn.forEach(h)}const Qt=new Set(["symbol"]);async function Zt(t,e,r,o,n){if(P(r)&&(Ao(r)||To(r))||o.filter&&!o.filter(r))return;Qt.has(e.nodeName)||Qt.has(r.nodeName)?o.currentParentNodeStyle=void 0:o.currentParentNodeStyle=o.currentNodeStyle;const i=await ot(r,o,!1,n);o.isEnable("restoreScrollPosition")&&nn(t,i),e.appendChild(i)}async function er(t,e,r,o){let n=t.firstChild;P(t)&&t.shadowRoot&&(n=t.shadowRoot?.firstChild,r.shadowRoots.push(t.shadowRoot));for(let i=n;i;i=i.nextSibling)if(!xo(i))if(P(i)&&Ro(i)&&typeof i.assignedNodes=="function"){const s=i.assignedNodes();for(let a=0;a<s.length;a++)await Zt(t,e,s[a],r,o)}else await Zt(t,e,i,r,o)}function nn(t,e){if(!ve(t)||!ve(e))return;const{scrollTop:r,scrollLeft:o}=t;if(!r&&!o)return;const{transform:n}=e.style,i=new DOMMatrix(n),{a:s,b:a,c:u,d:h}=i;i.a=1,i.b=0,i.c=0,i.d=1,i.translateSelf(-o,-r),i.a=s,i.b=a,i.c=u,i.d=h,e.style.transform=i.toString()}function sn(t,e){const{backgroundColor:r,width:o,height:n,style:i}=e,s=t.style;if(r&&s.setProperty("background-color",r,"important"),o&&s.setProperty("width",`${o}px`,"important"),n&&s.setProperty("height",`${n}px`,"important"),i)for(const a in i)s[a]=i[a]}const an=/^[\w-:]+$/;async function ot(t,e,r=!1,o){const{ownerDocument:n,ownerWindow:i,fontFamilies:s,onCloneEachNode:a}=e;if(n&&So(t))return o&&/\S/.test(t.data)&&o(t.data),n.createTextNode(t.data);if(n&&i&&P(t)&&(ve(t)||ye(t))){const h=await Ko(t,e);if(e.isEnable("removeAbnormalAttributes")){const p=h.getAttributeNames();for(let b=p.length,g=0;g<b;g++){const _=p[g];an.test(_)||h.removeAttribute(_)}}const l=e.currentNodeStyle=Zo(t,h,r,e);r&&sn(h,e);let c=!1;if(e.isEnable("copyScrollbar")){const p=[l.get("overflow-x")?.[0],l.get("overflow-y")?.[0]];c=p.includes("scroll")||(p.includes("auto")||p.includes("overlay"))&&(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)}const d=l.get("text-transform")?.[0],f=Vt(l.get("font-family")?.[0]),m=f?p=>{d==="uppercase"?p=p.toUpperCase():d==="lowercase"?p=p.toLowerCase():d==="capitalize"&&(p=p[0].toUpperCase()+p.substring(1)),f.forEach(b=>{let g=s.get(b);g||s.set(b,g=new Set),p.split("").forEach(_=>g.add(_))})}:void 0;return on(t,h,c,e,m),en(t,h),Ue(t)||await er(t,h,e,m),await a?.(h),h}const u=t.cloneNode(!1);return await er(t,u,e),await a?.(u),u}function ln(t){if(t.ownerDocument=void 0,t.ownerWindow=void 0,t.svgStyleElement=void 0,t.svgDefsElement=void 0,t.svgStyles.clear(),t.defaultComputedStyles.clear(),t.sandbox){try{t.sandbox.remove()}catch(e){t.log.warn("Failed to destroyContext",e)}t.sandbox=void 0}t.workers=[],t.fontFamilies.clear(),t.fontCssTexts.clear(),t.requests.clear(),t.tasks=[],t.shadowRoots=[]}function cn(t){const{url:e,timeout:r,responseType:o,...n}=t,i=new AbortController,s=r?setTimeout(()=>i.abort(),r):void 0;return fetch(e,{signal:i.signal,...n}).then(a=>{if(!a.ok)throw new Error("Failed fetch, not 2xx response",{cause:a});switch(o){case"arrayBuffer":return a.arrayBuffer();case"dataUrl":return a.blob().then(Oo);case"text":default:return a.text()}}).finally(()=>clearTimeout(s))}function $e(t,e){const{url:r,requestType:o="text",responseType:n="text",imageDom:i}=e;let s=r;const{timeout:a,acceptOfImage:u,requests:h,fetchFn:l,fetch:{requestInit:c,bypassingCache:d,placeholderImage:f},font:m,workers:p,fontFamilies:b}=t;o==="image"&&(Ne||et)&&t.drawImageCount++;let g=h.get(r);if(!g){d&&d instanceof RegExp&&d.test(s)&&(s+=(/\?/.test(s)?"&":"?")+new Date().getTime());const _=o.startsWith("font")&&m&&m.minify,y=new Set;_&&o.split(";")[1].split(",").forEach(B=>{b.has(B)&&b.get(B).forEach(ie=>y.add(ie))});const k=_&&y.size,R={url:s,timeout:a,responseType:k?"arrayBuffer":n,headers:o==="image"?{accept:u}:void 0,...c};g={type:o,resolve:void 0,reject:void 0,response:null},g.response=(async()=>{if(l&&o==="image"){const I=await l(r);if(I)return I}return!Ne&&r.startsWith("http")&&p.length?new Promise((I,B)=>{p[h.size&p.length-1].postMessage({rawUrl:r,...R}),g.resolve=I,g.reject=B}):cn(R)})().catch(I=>{if(h.delete(r),o==="image"&&f)return t.log.warn("Failed to fetch image base64, trying to use placeholder image",s),typeof f=="string"?f:f(i);throw I}),h.set(r,g)}return g.response}async function tr(t,e,r,o){if(!rr(t))return t;for(const[n,i]of un(t,e))try{const s=await $e(r,{url:i,requestType:o?"image":"text",responseType:"dataUrl"});t=t.replace(dn(n),`$1${s}$3`)}catch(s){r.log.warn("Failed to fetch css data url",n,s)}return t}function rr(t){return/url\((['"]?)([^'"]+?)\1\)/.test(t)}const or=/url\((['"]?)([^'"]+?)\1\)/g;function un(t,e){const r=[];return t.replace(or,(o,n,i)=>(r.push([i,qt(i,e)]),o)),r.filter(([o])=>!tt(o))}function dn(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}const hn=["background-image","border-image-source","-webkit-border-image","-webkit-mask-image","list-style-image"];function fn(t,e){return hn.map(r=>{const o=t.getPropertyValue(r);return!o||o==="none"?null:((Ne||et)&&e.drawImageCount++,tr(o,null,e,!0).then(n=>{!n||o===n||t.setProperty(r,n,t.getPropertyPriority(r))}))}).filter(Boolean)}function pn(t,e){if(re(t)){const r=t.currentSrc||t.src;if(!tt(r))return[$e(e,{url:r,imageDom:t,requestType:"image",responseType:"dataUrl"}).then(o=>{o&&(t.srcset="",t.dataset.originalSrc=r,t.src=o||"")})];(Ne||et)&&e.drawImageCount++}else if(ye(t)&&!tt(t.href.baseVal)){const r=t.href.baseVal;return[$e(e,{url:r,imageDom:t,requestType:"image",responseType:"dataUrl"}).then(o=>{o&&(t.dataset.originalSrc=r,t.href.baseVal=o||"")})]}return[]}function gn(t,e){const{ownerDocument:r,svgDefsElement:o}=e,n=t.getAttribute("href")??t.getAttribute("xlink:href");if(!n)return[];const[i,s]=n.split("#");if(s){const a=`#${s}`,u=e.shadowRoots.reduce((h,l)=>h??l.querySelector(`svg ${a}`),r?.querySelector(`svg ${a}`));if(i&&t.setAttribute("href",a),o?.querySelector(a))return[];if(u)return o?.appendChild(u.cloneNode(!0)),[];if(i)return[$e(e,{url:i,responseType:"text"}).then(h=>{o?.insertAdjacentHTML("beforeend",h)})]}return[]}function nr(t,e){const{tasks:r}=e;P(t)&&((re(t)||Ht(t))&&r.push(...pn(t,e)),$o(t)&&r.push(...gn(t,e))),ve(t)&&r.push(...fn(t.style,e)),t.childNodes.forEach(o=>{nr(o,e)})}async function mn(t,e){const{ownerDocument:r,svgStyleElement:o,fontFamilies:n,fontCssTexts:i,tasks:s,font:a}=e;if(!(!r||!o||!n.size))if(a&&a.cssText){const u=sr(a.cssText,e);o.appendChild(r.createTextNode(`${u}
`))}else{const u=Array.from(r.styleSheets).filter(l=>{try{return"cssRules"in l&&!!l.cssRules.length}catch(c){return e.log.warn(`Error while reading CSS rules from ${l.href}`,c),!1}});await Promise.all(u.flatMap(l=>Array.from(l.cssRules).map(async(c,d)=>{if(_o(c)){let f=d+1;const m=c.href;let p="";try{p=await $e(e,{url:m,requestType:"text",responseType:"text"})}catch(g){e.log.warn(`Error fetch remote css import from ${m}`,g)}const b=p.replace(or,(g,_,y)=>g.replace(y,qt(y,m)));for(const g of wn(b))try{l.insertRule(g,g.startsWith("@import")?f+=1:l.cssRules.length)}catch(_){e.log.warn("Error inserting rule from remote css import",{rule:g,error:_})}}}))),u.flatMap(l=>Array.from(l.cssRules)).filter(l=>vo(l)&&rr(l.style.getPropertyValue("src"))&&Vt(l.style.getPropertyValue("font-family"))?.some(c=>n.has(c))).forEach(l=>{const c=l,d=i.get(c.cssText);d?o.appendChild(r.createTextNode(`${d}
`)):s.push(tr(c.cssText,c.parentStyleSheet?c.parentStyleSheet.href:null,e).then(f=>{f=sr(f,e),i.set(c.cssText,f),o.appendChild(r.createTextNode(`${f}
`))}))})}}const bn=/(\/\*[\s\S]*?\*\/)/g,ir=/((@.*?keyframes [\s\S]*?){([\s\S]*?}\s*?)})/gi;function wn(t){if(t==null)return[];const e=[];let r=t.replace(bn,"");for(;;){const i=ir.exec(r);if(!i)break;e.push(i[0])}r=r.replace(ir,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,n=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let i=o.exec(r);if(i)n.lastIndex=o.lastIndex;else if(i=n.exec(r),i)o.lastIndex=n.lastIndex;else break;e.push(i[0])}return e}const yn=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,vn=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function sr(t,e){const{font:r}=e,o=r?r?.preferredFormat:void 0;return o?t.replace(vn,n=>{for(;;){const[i,,s]=yn.exec(n)||[];if(!s)return"";if(s===o)return`src: ${i};`}}):t}async function _n(t,e){const r=await rt(t,e);if(P(r.node)&&ye(r.node))return r.node;const{ownerDocument:o,log:n,tasks:i,svgStyleElement:s,svgDefsElement:a,svgStyles:u,font:h,progress:l,autoDestruct:c,onCloneNode:d,onEmbedNode:f,onCreateForeignObjectSvg:m}=r;n.time("clone node");const p=await ot(r.node,r,!0);if(s&&o){let k="";u.forEach((R,I)=>{k+=`${R.join(`,
`)} {
  ${I}
}
`}),s.appendChild(o.createTextNode(k))}n.timeEnd("clone node"),await d?.(p),h!==!1&&P(p)&&(n.time("embed web font"),await mn(p,r),n.timeEnd("embed web font")),n.time("embed node"),nr(p,r);const b=i.length;let g=0;const _=async()=>{for(;;){const k=i.pop();if(!k)break;try{await k}catch(R){r.log.warn("Failed to run task",R)}l?.(++g,b)}};l?.(g,b),await Promise.all([...Array.from({length:4})].map(_)),n.timeEnd("embed node"),await f?.(p);const y=$n(p,r);return a&&y.insertBefore(a,y.children[0]),s&&y.insertBefore(s,y.children[0]),c&&ln(r),await m?.(y),y}function $n(t,e){const{width:r,height:o}=e,n=Uo(r,o,t.ownerDocument),i=n.ownerDocument.createElementNS(n.namespaceURI,"foreignObject");return i.setAttributeNS(null,"x","0%"),i.setAttributeNS(null,"y","0%"),i.setAttributeNS(null,"width","100%"),i.setAttributeNS(null,"height","100%"),i.append(t),n.appendChild(i),n}async function xn(t,e){const r=await rt(t,e),o=await _n(r),n=zo(o,r.isEnable("removeControlCharacter"));r.autoDestruct||(r.svgStyleElement=Xt(r.ownerDocument),r.svgDefsElement=r.ownerDocument?.createElementNS(De,"defs"),r.svgStyles.clear());const i=oe(n,o.ownerDocument);return await qo(i,r)}async function Sn(t,e){const r=await rt(t,e),{log:o,quality:n,type:i,dpi:s}=r,a=await xn(r);o.time("canvas to data url");let u=a.toDataURL(i,n);if(["image/png","image/jpeg"].includes(i)&&s&&bo&&wo){const[h,l]=u.split(",");let c=0,d=!1;if(i==="image/png"){const y=go(l);y>=0?(c=Math.ceil((y+28)/3)*4,d=!0):c=33/3*4}else i==="image/jpeg"&&(c=18/3*4);const f=l.substring(0,c),m=l.substring(c),p=window.atob(f),b=new Uint8Array(p.length);for(let y=0;y<b.length;y++)b[y]=p.charCodeAt(y);const g=i==="image/png"?uo(b,s,d):so(b,s),_=window.btoa(String.fromCharCode(...g));u=[h,",",_,m].join("")}return o.timeEnd("canvas to data url"),u}async function nt(t=null){Re.set(!0),await new Promise(r=>setTimeout(r,50));let e=null;try{if(t){const u=t.getBoundingClientRect(),h=window.scrollX,l=window.scrollY;e=document.createElement("div"),e.className="wafir-temp-highlight",Object.assign(e.style,{position:"absolute",top:`${u.top+l}px`,left:`${u.left+h}px`,width:`${u.width}px`,height:`${u.height}px`,border:"4px solid #2563eb",backgroundColor:"rgba(37, 99, 235, 0.1)",zIndex:"2147483647",boxSizing:"border-box",pointerEvents:"none"}),document.body.appendChild(e)}const r=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth,window.innerWidth),o=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight,window.innerHeight),i=window.getComputedStyle(document.body).backgroundColor,s=i==="rgba(0, 0, 0, 0)"||i==="transparent"?"#ffffff":i,a=await Sn(document.documentElement,{width:r,height:o,backgroundColor:s,filter:u=>u instanceof HTMLElement&&u.tagName.toLowerCase().startsWith("wafir-")?u.className==="wafir-temp-highlight":!0});Ut(a)}catch(r){console.error("Failed to capture full page screenshot",r)}finally{e&&e.parentElement&&document.body.removeChild(e),Re.set(!1)}}var Cn=Object.defineProperty,En=Object.getOwnPropertyDescriptor,ne=(t,e,r,o)=>{for(var n=o>1?void 0:o?En(e,r):e,i=t.length-1,s;i>=0;i--)(s=t[i])&&(n=(o?s(e,r,n):s(n))||n);return o&&n&&Cn(e,r,n),n};let j=class extends z{constructor(){super(...arguments),this.fields=[],this.showBrowserInfo=!1,this.showConsoleLog=!1,this.loading=!1,this.bridgeAvailable=!0,this._capturedImageController=new N.StoreController(this,Ie),this._formDataController=new N.StoreController(this,L),this._browserInfoController=new N.StoreController(this,be),this._consoleLogsController=new N.StoreController(this,we)}willUpdate(t){if(t.has("fields")){const e=L.get();let r=!1;const o={...e};this.fields.forEach(n=>{n.defaultValue&&!o[n.id]&&(o[n.id]=n.defaultValue,r=!0)}),r&&Pe(o)}}_handleInputChange(t,e){const r=t.target,o=r.type==="checkbox"?r.checked:r.value;Pe({...L.get(),[e]:o})}_handleSubmit(t){t.preventDefault(),this.loading=!0,this.dispatchEvent(new CustomEvent("form-submit",{detail:{formData:L.get()},bubbles:!0,composed:!0}))}_renderFieldInput(t){const e=this._formDataController.value[t.id]||"";switch(t.type){case"textarea":return w`
          <textarea
            id="${t.id}"
            .value="${e}"
            placeholder="${t.placeholder||""}"
            ?required="${t.required}"
            @input="${o=>this._handleInputChange(o,t.id)}"
          ></textarea>
        `;case"select":return w`
          <select
            id="${t.id}"
            .value="${e}"
            ?required="${t.required}"
            @change="${o=>this._handleInputChange(o,t.id)}"
          >
            <option value="" disabled selected>Select an option</option>
            ${t.options?.map(o=>w`<option value="${o}">${o}</option>`)}
          </select>
        `;case"switch":const r=e||t.options?.[0]||"";return w`
          <div class="switch-container">
            ${t.options?.map(o=>w`
                <button
                  type="button"
                  class="switch-option ${r===o?"active":""}"
                  @click="${()=>{Pe({...L.get(),[t.id]:o})}}"
                >
                  ${o}
                </button>
              `)}
          </div>
        `;case"checkbox":return w`
          <div class="checkbox-group">
            <input
              type="checkbox"
              id="${t.id}"
              .checked="${!!e}"
              @change="${o=>this._handleInputChange(o,t.id)}"
            />
            <label for="${t.id}">${t.label}</label>
          </div>
        `;case"screenshot":return w`
          <div>
            ${this._capturedImageController.value?w`
                  <div class="screenshot-preview">
                    <img
                      src="${this._capturedImageController.value}"
                      alt="Captured screenshot"
                    />
                    <button
                      type="button"
                      class="screenshot-clear"
                      @click="${()=>Ut(null)}"
                    >
                      &times;
                    </button>
                  </div>
                  <div class="screenshot-actions">
                    <button
                      type="button"
                      @click="${()=>nt()}"
                    >
                      Retake
                    </button>
                    <button
                      type="button"
                      class="highlight-btn"
                      @click="${()=>oo()}"
                    >
                      <svg
                        width="14"
                        height="14"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"
                        />
                      </svg>
                      Highlight
                    </button>
                  </div>
                `:w`
                  <button
                    type="button"
                    class="capture-button"
                    @click="${()=>nt()}"
                  >
                    <svg
                      width="16"
                      height="16"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"
                      />
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"
                      />
                    </svg>
                    Take Screenshot
                  </button>
                `}
          </div>
        `;case"rating":return w`
          <wafir-star-rating
            .value="${Number(e)||0}"
            .labels="${t.ratingLabels||[]}"
            @rating-change="${o=>{Pe({...L.get(),[t.id]:o.detail.value})}}"
          ></wafir-star-rating>
        `;case"text":case"email":default:return w`
          <input
            type="${t.type}"
            id="${t.id}"
            .value="${e}"
            placeholder="${t.placeholder||""}"
            ?required="${t.required}"
            ?hidden="${t.hidden}"
            @input="${o=>this._handleInputChange(o,t.id)}"
          />
        `}}render(){return w`
      <form @submit="${this._handleSubmit}">
        ${this.fields.map(t=>t.hidden?this._renderFieldInput(t):t.type==="checkbox"?w`<div class="form-group">
              ${this._renderFieldInput(t)}
            </div>`:w`
            <div class="form-group">
              <label for="${t.id}">
                ${t.label} ${t.required?"*":""}
              </label>
              ${this._renderFieldInput(t)}
            </div>
          `)}

        <button class="submit-button" type="submit" ?disabled="${this.loading||!this.bridgeAvailable}">
          ${this.loading?w`<span class="spinner"></span> Submitting...`:this.bridgeAvailable?"Submit":"Service Unavailable"}
        </button>

        ${this.showBrowserInfo&&this._browserInfoController.value?w`
              <div class="telemetry-section">
                <h4>Browser Information</h4>
                <div class="telemetry-grid">
                  <span class="telemetry-label">URL:</span>
                  <span>${this._browserInfoController.value.url}</span>
                  <span class="telemetry-label">Viewport:</span>
                  <span
                    >${this._browserInfoController.value.viewportWidth}x${this._browserInfoController.value.viewportHeight}</span
                  >
                  <span class="telemetry-label">UA:</span>
                  <span style="font-size: 10px;"
                    >${this._browserInfoController.value.userAgent}</span
                  >
                </div>
              </div>
            `:""}
        ${this.showConsoleLog&&this._consoleLogsController.value.length>0?w`
              <div class="telemetry-section">
                <h4>Recent Console Logs</h4>
                <div class="logs-container">
                  ${this._consoleLogsController.value.map(t=>w`
                      <div
                        class="log-item ${t.type==="warn"?"log-warn":"log-error"}"
                      >
                        [${t.timestamp.split("T")[1].split(".")[0]}]
                        ${t.message}
                      </div>
                    `)}
                </div>
              </div>
            `:""}
      </form>
    `}};j.styles=[se(qr)],ne([x({type:Array})],j.prototype,"fields",2),ne([x({type:Boolean})],j.prototype,"showBrowserInfo",2),ne([x({type:Boolean})],j.prototype,"showConsoleLog",2),ne([x({type:Boolean})],j.prototype,"loading",2),ne([x({type:Boolean})],j.prototype,"bridgeAvailable",2),j=ne([Te("wafir-form")],j);const kn="html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}:host{position:fixed;top:0;left:0;width:100vw;height:100vh;pointer-events:none;z-index:10000}.overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:var(--wafir-highlighter-overlay-bg, rgba(0, 0, 0, .1));pointer-events:auto;cursor:crosshair}.highlight{position:absolute;border:2px solid var(--wafir-highlighter-primary-color, #2563eb);background:var(--wafir-highlighter-highlight-bg, rgba(37, 99, 235, .1));pointer-events:none;transition:all .1s ease;box-sizing:border-box;z-index:10001}.label{position:absolute;top:-24px;left:0;background:var(--wafir-highlighter-primary-color, #2563eb);color:#fff;padding:2px 6px;font-size:10px;border-radius:4px;white-space:nowrap}";var An=Object.defineProperty,Tn=Object.getOwnPropertyDescriptor,ar=(t,e,r,o)=>{for(var n=o>1?void 0:o?Tn(e,r):e,i=t.length-1,s;i>=0;i--)(s=t[i])&&(n=(o?s(e,r,n):s(n))||n);return o&&n&&An(e,r,n),n};let Oe=class extends z{constructor(){super(...arguments),this._isSelectingController=new N.StoreController(this,Y),this._hoveredElementController=new N.StoreController(this,te),this._rect=null,this._handleKeyDown=t=>{t.key==="Escape"&&Y.get()&&Nt()},this._handleMouseMove=t=>{if(!Y.get())return;const e=this.shadowRoot?.querySelector(".overlay");e&&(e.style.pointerEvents="none");const r=document.elementFromPoint(t.clientX,t.clientY);e&&(e.style.pointerEvents="auto"),r&&!this._isWafirElement(r)?(te.set(r),this._rect=r.getBoundingClientRect()):(te.set(null),this._rect=null)}}connectedCallback(){super.connectedCallback(),window.addEventListener("keydown",this._handleKeyDown)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("keydown",this._handleKeyDown)}_isWafirElement(t){let e=t;for(;e;){if(e.tagName.toLowerCase().startsWith("wafir-"))return!0;if(e.parentElement)e=e.parentElement;else if(e.getRootNode().host)e=e.getRootNode().host;else break}return!1}async _handleClick(){const t=te.get();t&&(await nt(t),Nt())}render(){return this._isSelectingController.value?w`
      <div
        class="overlay"
        @mousemove="${this._handleMouseMove}"
        @click="${this._handleClick}"
      ></div>
      ${this._rect?w`
            <div
              class="highlight"
              style="
                    top: ${this._rect.top}px;
                    left: ${this._rect.left}px;
                    width: ${this._rect.width}px;
                    height: ${this._rect.height}px;
                "
            >
              <div class="label">
                ${this._hoveredElementController.value?.tagName.toLowerCase()}
                ${this._rect.width.toFixed(0)}x${this._rect.height.toFixed(0)}
              </div>
            </div>
          `:""}
    `:w``}};Oe.styles=[se(kn)],ar([T()],Oe.prototype,"_rect",2),Oe=ar([Te("wafir-highlighter")],Oe);function Mn(t){const e=t.split(","),r=e[0].match(/:(.*?);/),o=r?r[1]:"image/png",n=atob(e[1]);let i=n.length;const s=new Uint8Array(i);for(;i--;)s[i]=n.charCodeAt(i);return new Blob([s],{type:o})}function Rn(){return{userAgent:navigator.userAgent,viewportWidth:window.innerWidth,viewportHeight:window.innerHeight,language:navigator.language,url:window.location.href}}class In{constructor(){this.logs=[],this.maxLogs=50,this.originalWarn=console.warn,this.originalError=console.error,this.setupInterceptor()}setupInterceptor(){console.warn=(...e)=>{this.addLog("warn",e),this.originalWarn.apply(console,e)},console.error=(...e)=>{this.addLog("error",e),this.originalError.apply(console,e)}}addLog(e,r){const o=r.map(n=>typeof n=="object"?JSON.stringify(n):String(n)).join(" ").trim();this.logs.push({type:e,message:o,timestamp:new Date().toISOString()}),this.logs.length>this.maxLogs&&this.logs.shift()}getLogs(){return[...this.logs]}clear(){this.logs=[]}}const Pn=new In;var Nn=Object.defineProperty,Un=Object.getOwnPropertyDescriptor,S=(t,e,r,o)=>{for(var n=o>1?void 0:o?Un(e,r):e,i=t.length-1,s;i>=0;i--)(s=t[i])&&(n=(o?s(e,r,n):s(n))||n);return o&&n&&Nn(e,r,n),n};const zn={thumbsup:kt,lightbulb:Hr,bug:Br};v.MyElement=class extends z{constructor(){super(...arguments),this.buttonText="",this.modalTitle="Contact Us",this.position="bottom-right",this.tooltipText="Open Issue Reporter",this.config={},this._isSelectingController=new N.StoreController(this,Y),this._isCapturingController=new N.StoreController(this,Re),this._capturedImageController=new N.StoreController(this,Ie),this.isModalOpen=!1,this.isConfigLoading=!1,this.configFetchError=null,this.isBridgeAvailable=!0,this._hasCustomTrigger=!1,this._remoteConfig=null,this._tabConfigs=Yr(),this._activeTab="feedback",this._availableTabs=Vr,this.installationId=0,this.owner="",this.repo="",this.bridgeUrl=""}connectedCallback(){super.connectedCallback(),this._checkCustomTrigger(),this._mergeInlineConfig()}_checkCustomTrigger(){this._hasCustomTrigger=this.querySelector('[slot="trigger"]')!==null}_mergeInlineConfig(){if(this.config&&Object.keys(this.config).length>0){const e={...this._tabConfigs};for(const r of Object.keys(this.config))this.config[r]&&(e[r]=this.config[r]);this._tabConfigs=e}}openModal(){this.isModalOpen||this._openModal()}async _openModal(){this.isModalOpen=!0,no(Rn()),io(Pn.getLogs()),await this._checkBridgeHealth(),await this._fetchConfig()}async _handleTriggerClick(){this.isModalOpen?this._closeModal():await this._openModal()}async _checkBridgeHealth(){try{const{checkBridgeHealth:e}=await Promise.resolve().then(()=>at);this.isBridgeAvailable=await e(this.bridgeUrl||void 0),this.isBridgeAvailable||console.warn("Wafir: Bridge service is not available")}catch(e){console.warn("Wafir: Failed to check bridge health",e),this.isBridgeAvailable=!1}}async _fetchConfig(){if(!(!this.installationId||!this.owner||!this.repo)){this.isConfigLoading=!0,this.configFetchError=null;try{const{getWafirConfig:e}=await Promise.resolve().then(()=>at),r=await e(this.installationId,this.owner,this.repo,this.bridgeUrl||void 0);if(r){if(this._remoteConfig=r,r.fields){const o=r.fields.map(n=>({id:n.name,label:n.label,type:n.type,required:n.required,options:n.options}));r.issueTypes&&r.issueTypes.length>0&&o.unshift({id:"issueType",label:"Issue Type",type:"select",required:!0,options:r.issueTypes.map(n=>n.name)}),r.issue&&r.issue.screenshot&&o.push({id:"screenshot",label:"Screenshot",type:"screenshot"}),this._tabConfigs={...this._tabConfigs,issue:o}}r.feedback&&r.feedback.title&&(this.modalTitle=r.feedback.title)}}catch(e){console.warn("Wafir: Failed to fetch remote config, using defaults",e)}finally{this.isConfigLoading=!1}}}_closeModal(){this.isModalOpen=!1,zt()}_getActiveFormConfig(){return this._tabConfigs[this._activeTab]||[]}_switchTab(e){this._activeTab=e}updated(e){e.has("_isSelectingController")}async _handleSubmit(e){const r=e.detail.formData;if(!this.installationId||!this.owner||!this.repo){console.error("Wafir: Missing configuration (installationId, owner, or repo)"),alert("Widget configuration error");return}try{let o,n;const i=[this._activeTab];if(this._activeTab==="feedback"){const c=Number(r.rating)||0;this._tabConfigs.feedback.some(f=>f.id==="rating")&&c>0?o=r.title||"Feedback":o=`Feedback rating: ${c}`,n=r.description||""}else if(this._activeTab==="suggestion")o=r.title||"Suggestion",n=r.description||"";else{o=r.title||"No Title",n=r.description||"";const c=r.type;c&&i.push(c.toLowerCase())}const{submitIssue:s}=await Promise.resolve().then(()=>at),a=this._capturedImageController.value,u=a?Mn(a):void 0;if(this._activeTab==="issue"&&this._remoteConfig?.issue?.browserInfo&&be.get()){const c=be.get();n+=`

# Browser Info
| Field | Value |
| :--- | :--- |
| URL | ${c.url} |
| User Agent | \`${c.userAgent}\` |
| Viewport | ${c.viewportWidth}x${c.viewportHeight} |
| Language | ${c.language} |`}if(this._activeTab==="issue"&&this._remoteConfig?.issue?.consoleLog&&we.get().length>0){const c=we.get();n+=`

# Console Logs
\`\`\`
${c.map(d=>`[${d.type.toUpperCase()}] ${d.message}`).join(`
`)}
\`\`\``}this._activeTab==="issue"&&this._remoteConfig?.issue?.screenshot&&u&&(n+=`

# Screenshot`);const h=this._activeTab==="feedback"?"feedback":"issue",l=this._activeTab==="feedback"&&Number(r.rating)||void 0;await s(this.installationId,this.owner,this.repo,o,n,i,u,this.bridgeUrl||void 0,l,h),alert("Thank you for your input!"),zt(),this.isModalOpen=!1}catch(o){console.error("Wafir: Submit failed",o),alert("Failed to submit. Please check configuration.")}}_renderTabIcon(e){return Et(zn[e]||"")}render(){return this._isCapturingController.value?w``:this._isSelectingController.value?w`<wafir-highlighter></wafir-highlighter>`:w`
      ${this._hasCustomTrigger?w`<div
            class="trigger-container ${this.position}"
            @click="${this._handleTriggerClick}"
          >
            <slot name="trigger"></slot>
          </div>`:w`
            <div class="trigger-container ${this.position}">
              <button
                @click="${this._handleTriggerClick}"
                part="button"
                aria-label="${this.tooltipText}"
              >
                <span>${Et(kt)}</span>
              </button>
              <div class="tooltip">${this.tooltipText}</div>
            </div>
          `}
      ${this.isModalOpen?w`
            <div
              class="modal-backdrop"
              @click="${this._closeModal}"
              role="dialog"
              aria-modal="true"
            >
              <div
                class="modal-content"
                @click="${e=>e.stopPropagation()}"
              >
                <div class="modal-header">
                  <h3 id="modal-title">${this.modalTitle}</h3>
                  <button
                    class="close-button"
                    @click="${this._closeModal}"
                    aria-label="Close modal"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="lucide lucide-x-icon lucide-x"
                    >
                      <path d="M18 6 6 18" />
                      <path d="m6 6 12 12" />
                    </svg>
                  </button>
                </div>

                ${this.isConfigLoading?w`<div style="padding: 20px; text-align: center;">
                      Loading configuration...
                    </div>`:w`
                      <div class="mode-tabs">
                        ${this._availableTabs.map(e=>w`
                            <button
                              class="mode-tab ${this._activeTab===e.id?"active":""}"
                              @click="${()=>this._switchTab(e.id)}"
                            >
                              ${this._renderTabIcon(e.icon)} ${e.label}
                            </button>
                          `)}
                      </div>
                      <wafir-form
                        .fields="${this._getActiveFormConfig()}"
                        .showBrowserInfo="${this._activeTab==="issue"&&!!this._remoteConfig?.issue?.browserInfo}"
                        .showConsoleLog="${this._activeTab==="issue"&&!!this._remoteConfig?.issue?.consoleLog}"
                        .bridgeAvailable="${this.isBridgeAvailable}"
                        @form-submit="${this._handleSubmit}"
                      ></wafir-form>
                    `}
              </div>
            </div>
          `:""}

      <wafir-highlighter></wafir-highlighter>
    `}},v.MyElement.styles=[se(jr)],S([x({type:String})],v.MyElement.prototype,"buttonText",2),S([x({type:String})],v.MyElement.prototype,"modalTitle",2),S([x({type:String})],v.MyElement.prototype,"position",2),S([x({type:String})],v.MyElement.prototype,"tooltipText",2),S([x({type:Object})],v.MyElement.prototype,"config",2),S([T()],v.MyElement.prototype,"isModalOpen",2),S([T()],v.MyElement.prototype,"isConfigLoading",2),S([T()],v.MyElement.prototype,"configFetchError",2),S([T()],v.MyElement.prototype,"isBridgeAvailable",2),S([T()],v.MyElement.prototype,"_hasCustomTrigger",2),S([T()],v.MyElement.prototype,"_remoteConfig",2),S([T()],v.MyElement.prototype,"_tabConfigs",2),S([T()],v.MyElement.prototype,"_activeTab",2),S([T()],v.MyElement.prototype,"_availableTabs",2),S([x({type:Number})],v.MyElement.prototype,"installationId",2),S([x({type:String})],v.MyElement.prototype,"owner",2),S([x({type:String})],v.MyElement.prototype,"repo",2),S([x({type:String})],v.MyElement.prototype,"bridgeUrl",2),v.MyElement=S([Te("wafir-reporter")],v.MyElement);const Dn=/\{[^{}]+\}/g,On=()=>typeof process=="object"&&Number.parseInt(void 0)>=18&&(void 0).undici;function Ln(){return Math.random().toString(36).slice(2,11)}function Fn(t){let{baseUrl:e="",Request:r=globalThis.Request,fetch:o=globalThis.fetch,querySerializer:n,bodySerializer:i,headers:s,requestInitExt:a=void 0,...u}={...t};a=On()?a:void 0,e=hr(e);const h=[];async function l(c,d){const{baseUrl:f,fetch:m=o,Request:p=r,headers:b,params:g={},parseAs:_="json",querySerializer:y,bodySerializer:k=i??Bn,body:R,middleware:I=[],...B}=d||{};let ie=e;f&&(ie=hr(f)??e);let lt=typeof n=="function"?n:ur(n);y&&(lt=typeof y=="function"?y:ur({...typeof n=="object"?n:{},...y}));const ct=R===void 0?void 0:k(R,dr(s,b,g.header)),qn=dr(ct===void 0||ct instanceof FormData?{}:{"Content-Type":"application/json"},s,b,g.header),H=[...h,...I],Wn={redirect:"follow",...u,...B,body:ct,headers:qn};let Fe,je,q=new p(Hn(c,{baseUrl:ie,params:g,querySerializer:lt}),Wn),C;for(const A in B)A in q||(q[A]=B[A]);if(H.length){Fe=Ln(),je=Object.freeze({baseUrl:ie,fetch:m,parseAs:_,querySerializer:lt,bodySerializer:k});for(const A of H)if(A&&typeof A=="object"&&typeof A.onRequest=="function"){const E=await A.onRequest({request:q,schemaPath:c,params:g,options:je,id:Fe});if(E)if(E instanceof p)q=E;else if(E instanceof Response){C=E;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!C){try{C=await m(q,a)}catch(A){let E=A;if(H.length)for(let J=H.length-1;J>=0;J--){const Be=H[J];if(Be&&typeof Be=="object"&&typeof Be.onError=="function"){const xe=await Be.onError({request:q,error:E,schemaPath:c,params:g,options:je,id:Fe});if(xe){if(xe instanceof Response){E=void 0,C=xe;break}if(xe instanceof Error){E=xe;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(E)throw E}if(H.length)for(let A=H.length-1;A>=0;A--){const E=H[A];if(E&&typeof E=="object"&&typeof E.onResponse=="function"){const J=await E.onResponse({request:q,response:C,schemaPath:c,params:g,options:je,id:Fe});if(J){if(!(J instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");C=J}}}}if(C.status===204||q.method==="HEAD"||C.headers.get("Content-Length")==="0")return C.ok?{data:void 0,response:C}:{error:void 0,response:C};if(C.ok)return _==="stream"?{data:C.body,response:C}:{data:await C[_](),response:C};let ut=await C.text();try{ut=JSON.parse(ut)}catch{}return{error:ut,response:C}}return{request(c,d,f){return l(d,{...f,method:c.toUpperCase()})},GET(c,d){return l(c,{...d,method:"GET"})},PUT(c,d){return l(c,{...d,method:"PUT"})},POST(c,d){return l(c,{...d,method:"POST"})},DELETE(c,d){return l(c,{...d,method:"DELETE"})},OPTIONS(c,d){return l(c,{...d,method:"OPTIONS"})},HEAD(c,d){return l(c,{...d,method:"HEAD"})},PATCH(c,d){return l(c,{...d,method:"PATCH"})},TRACE(c,d){return l(c,{...d,method:"TRACE"})},use(...c){for(const d of c)if(d){if(typeof d!="object"||!("onRequest"in d||"onResponse"in d||"onError"in d))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");h.push(d)}},eject(...c){for(const d of c){const f=h.indexOf(d);f!==-1&&h.splice(f,1)}}}}function Le(t,e,r){if(e==null)return"";if(typeof e=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${t}=${r?.allowReserved===!0?e:encodeURIComponent(e)}`}function lr(t,e,r){if(!e||typeof e!="object")return"";const o=[],n={simple:",",label:".",matrix:";"}[r.style]||"&";if(r.style!=="deepObject"&&r.explode===!1){for(const a in e)o.push(a,r.allowReserved===!0?e[a]:encodeURIComponent(e[a]));const s=o.join(",");switch(r.style){case"form":return`${t}=${s}`;case"label":return`.${s}`;case"matrix":return`;${t}=${s}`;default:return s}}for(const s in e){const a=r.style==="deepObject"?`${t}[${s}]`:s;o.push(Le(a,e[s],r))}const i=o.join(n);return r.style==="label"||r.style==="matrix"?`${n}${i}`:i}function cr(t,e,r){if(!Array.isArray(e))return"";if(r.explode===!1){const i={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[r.style]||",",s=(r.allowReserved===!0?e:e.map(a=>encodeURIComponent(a))).join(i);switch(r.style){case"simple":return s;case"label":return`.${s}`;case"matrix":return`;${t}=${s}`;default:return`${t}=${s}`}}const o={simple:",",label:".",matrix:";"}[r.style]||"&",n=[];for(const i of e)r.style==="simple"||r.style==="label"?n.push(r.allowReserved===!0?i:encodeURIComponent(i)):n.push(Le(t,i,r));return r.style==="label"||r.style==="matrix"?`${o}${n.join(o)}`:n.join(o)}function ur(t){return function(r){const o=[];if(r&&typeof r=="object")for(const n in r){const i=r[n];if(i!=null){if(Array.isArray(i)){if(i.length===0)continue;o.push(cr(n,i,{style:"form",explode:!0,...t?.array,allowReserved:t?.allowReserved||!1}));continue}if(typeof i=="object"){o.push(lr(n,i,{style:"deepObject",explode:!0,...t?.object,allowReserved:t?.allowReserved||!1}));continue}o.push(Le(n,i,t))}}return o.join("&")}}function jn(t,e){let r=t;for(const o of t.match(Dn)??[]){let n=o.substring(1,o.length-1),i=!1,s="simple";if(n.endsWith("*")&&(i=!0,n=n.substring(0,n.length-1)),n.startsWith(".")?(s="label",n=n.substring(1)):n.startsWith(";")&&(s="matrix",n=n.substring(1)),!e||e[n]===void 0||e[n]===null)continue;const a=e[n];if(Array.isArray(a)){r=r.replace(o,cr(n,a,{style:s,explode:i}));continue}if(typeof a=="object"){r=r.replace(o,lr(n,a,{style:s,explode:i}));continue}if(s==="matrix"){r=r.replace(o,`;${Le(n,a)}`);continue}r=r.replace(o,s==="label"?`.${encodeURIComponent(a)}`:encodeURIComponent(a))}return r}function Bn(t,e){return t instanceof FormData?t:e&&(e.get instanceof Function?e.get("Content-Type")??e.get("content-type"):e["Content-Type"]??e["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(t).toString():JSON.stringify(t)}function Hn(t,e){let r=`${e.baseUrl}${t}`;e.params?.path&&(r=jn(r,e.params.path));let o=e.querySerializer(e.params.query??{});return o.startsWith("?")&&(o=o.substring(1)),o&&(r+=`?${o}`),r}function dr(...t){const e=new Headers;for(const r of t){if(!r||typeof r!="object")continue;const o=r instanceof Headers?r.entries():Object.entries(r);for(const[n,i]of o)if(i===null)e.delete(n);else if(Array.isArray(i))for(const s of i)e.append(n,s);else i!==void 0&&e.set(n,i)}return e}function hr(t){return t.endsWith("/")?t.substring(0,t.length-1):t}let it="https://v6hvmahyx2.execute-api.us-east-2.amazonaws.com";const st=t=>{it=t},fr=()=>Fn({baseUrl:it}),at=Object.freeze(Object.defineProperty({__proto__:null,checkBridgeHealth:async t=>{const e=t||it;try{return(await fetch(`${e}/health`,{method:"GET",signal:AbortSignal.timeout(5e3)})).ok}catch(r){return console.warn("Wafir: Bridge health check failed",r),!1}},getWafirConfig:async(t,e,r,o)=>{o&&st(o);const{data:n,error:i}=await fr().GET("/config",{params:{query:{installationId:t,owner:e,repo:r}}});if(i)throw new Error(i.message||"Failed to fetch config");return n},setBridgeUrl:st,submitIssue:async(t,e,r,o,n,i,s,a,u,h)=>{a&&st(a);const l=new FormData;l.append("installationId",String(t)),l.append("owner",e),l.append("repo",r),l.append("title",o),l.append("body",n),i&&l.append("labels",JSON.stringify(i)),s&&l.append("screenshot",s,"screenshot.png"),u!==void 0&&l.append("rating",String(u)),h&&l.append("submissionType",h);const c=await fr().POST("/submit",{body:l});if(!c.response.ok){const d=await c.response.json().catch(()=>({}));throw new Error(d.message||"Failed to submit issue")}return c.data}},Symbol.toStringTag,{value:"Module"}));return Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),v})({});

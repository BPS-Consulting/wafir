---
const base = import.meta.env.BASE_URL;

const navLinks = [
  { href: `${base}/`, label: "Home" },
  { href: `${base}/installation`, label: "Installation" },
  { href: `${base}/documentation`, label: "Documentation" },
  { href: `${base}/contribute`, label: "Contribute" },
];
---

<header
  class="sticky top-0 z-100 bg-bg/90 backdrop-blur-[12px] border-b border-border"
>
  <nav
    class="max-w-[1200px] mx-auto px-6 flex items-center justify-between h-16"
  >
    <a href={base} class="flex items-center gap-3 font-bold text-xl text-primary">
      <img src={`${base}/wafir-logo.svg`} alt="Wafir logo" width="24" height="24" />
      <span>Wafir</span>
    </a>

    <button
      class="hidden max-md:block bg-transparent border-none text-text cursor-pointer p-2"
      aria-label="Toggle menu"
      aria-expanded="false"
      id="mobile-toggle"
    >
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>

    <ul
      id="nav-links"
      class="flex items-center gap-8 list-none m-0 p-0 max-md:absolute max-md:top-full max-md:left-0 max-md:right-0 max-md:flex-col max-md:gap-0 max-md:bg-bg-elevated max-md:border-b max-md:border-border max-md:hidden max-md:py-4"
    >
      {
        navLinks.map((link) => (
          <li class="max-md:w-full">
            <a
              href={link.href}
              class="text-text-muted font-medium transition-colors duration-200 hover:text-text max-md:block max-md:py-3 max-md:px-6"
            >
              {link.label}
            </a>
          </li>
        ))
      }
      <li class="max-md:w-full">
        <a
          href="https://github.com/BPS-Consulting/wafir"
          target="_blank"
          rel="noopener"
          class="flex items-center gap-2 text-text-muted font-medium transition-colors duration-200 hover:text-text max-md:py-3 max-md:px-6"
        >
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"
            ></path>
          </svg>
          <span>GitHub</span>
        </a>
      </li>
    </ul>
  </nav>
</header>

<script>
  const toggle = document.getElementById("mobile-toggle");
  const navLinks = document.getElementById("nav-links");

  toggle?.addEventListener("click", () => {
    const expanded = toggle.getAttribute("aria-expanded") === "true";
    toggle.setAttribute("aria-expanded", String(!expanded));
    navLinks?.classList.toggle("max-md:hidden");
    navLinks?.classList.toggle("max-md:flex");
  });
</script>

---
import Layout from "../layouts/Layout.astro";

const base = import.meta.env.BASE_URL;

const features = [
  {
    icon: "üöÄ",
    title: "Easy to Use",
    description:
      "Drop-in widget for any web app. Works natively as a Web Component, with React and Vue wrappers available.",
  },
  {
    icon: "üîì",
    title: "Open Source",
    description:
      "AGPLv3 licensed. Self-host the bridge or use our free service. Full control over your data.",
  },
  {
    icon: "üîó",
    title: "GitHub Native",
    description:
      "Issues go directly to your GitHub repo. Configure via a simple YAML file in your repo.",
  },
  {
    icon: "üì∏",
    title: "Rich Context",
    description:
      "Capture screenshots, browser info, and console logs automatically for better debugging.",
  },
  {
    icon: "üé®",
    title: "Fully Customizable",
    description:
      "Custom CSS, configurable forms, and slot-based triggers. Make it match your brand.",
  },
  {
    icon: "üåê",
    title: "Framework Agnostic",
    description:
      "Built as a Lit Web Component for direct browser use, plus React and Vue wrappers.",
  },
];

const quickstartCode = `<script type="module" src="https://wafir-all.s3.us-east-2.amazonaws.com/wafir/latest/wafir.js"></script>

<wafir-widget
  target-type="string"   # github/issues | github/project
  target="string"        # e.g., owner/repo or owner/projectNum
  auth-ref="string"       # e.g., GitHub installation ID
></wafir-widget>`;

const configCode = `# public/wafir.yaml
title: "Report a Bug"

targets:
  - id: default
    type: github/issues
    target: your-username/your-repo
    authRef: "YOUR_INSTALLATION_ID" # Replace with your GitHub App installation ID

# Widget forms - only showing issue form for basic bug reporting
forms:
  - id: issue
    label: Issue
    icon: bug
    fields:
      - id: title
        type: input
        attributes:
          label: "Issue Title"
        validations:
          required: true
      - id: description
        type: textarea
        attributes:
          label: "Description"
        validations:
          required: true`;
---

<Layout>
  <section class="py-24 max-md:py-12">
    <div class="max-w-[1200px] mx-auto px-6">
      <div class="max-w-[700px]">
        <div
          class="inline-block py-2 px-4 bg-bg-card border border-border rounded-full text-sm font-medium text-primary mb-6"
        >
          Open Source Feedback Widget
        </div>
        <h1 class="text-6xl font-extrabold mb-6 tracking-tight max-md:text-4xl">
          Collect feedback.<br />Ship to GitHub.
        </h1>
        <p class="text-xl text-text-muted mb-8 max-w-[600px] max-md:text-lg">
          Wafir is a powerful, lightweight feedback and bug reporting widget
          that bridges user feedback directly to your GitHub workflow. Easy to
          embed, simple to configure.
        </p>
        <div class="flex gap-4 flex-wrap">
          <a
            href={`${base}/installation`}
            class="inline-flex items-center gap-2 py-3 px-6 rounded-lg font-medium text-base transition-all duration-200 cursor-pointer border-none bg-primary text-white hover:bg-primary-hover hover:-translate-y-0.5"
            >Get Started</a
          >
          <a
            href="https://github.com/BPS-Consulting/wafir"
            target="_blank"
            rel="noopener"
            class="inline-flex items-center gap-2 py-3 px-6 rounded-lg font-medium text-base transition-all duration-200 cursor-pointer bg-transparent text-text border border-border hover:border-text-muted hover:bg-bg-elevated"
          >
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"
              ></path>
            </svg>
            View on GitHub
          </a>
        </div>
      </div>
    </div>
  </section>

  <section class="py-20 max-md:py-12">
    <div class="max-w-[1200px] mx-auto px-6">
      <div class="text-center mb-12">
        <h2 class="text-4xl font-bold mb-2">Why Wafir?</h2>
        <p class="text-text-muted text-lg">
          Everything you need for seamless feedback collection
        </p>
      </div>
      <div
        class="grid grid-cols-[repeat(auto-fit,minmax(320px,1fr))] gap-6 max-md:grid-cols-1"
      >
        {
          features.map((feature) => (
            <div class="bg-bg-card border border-border rounded-xl p-6 transition-colors duration-200 hover:border-primary">
              <div class="text-3xl mb-4">{feature.icon}</div>
              <h3 class="text-lg font-bold mb-2">{feature.title}</h3>
              <p class="text-text-muted text-[0.9375rem]">
                {feature.description}
              </p>
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <section class="py-20 max-md:py-12">
    <div class="max-w-[1200px] mx-auto px-6">
      <div class="text-center mb-12">
        <h2 class="text-4xl font-bold mb-2">Quick Start</h2>
        <p class="text-text-muted text-lg">Get up and running in three steps</p>
      </div>
      <div class="flex flex-col gap-8 max-w-[700px] mx-auto">
        <div class="flex gap-6 items-start max-md:flex-col max-md:gap-4">
          <div
            class="shrink-0 w-10 h-10 bg-primary text-white rounded-full flex items-center justify-center font-bold"
          >
            1
          </div>
          <div class="flex-1">
            <h3 class="text-lg font-bold mb-3">Install the widget</h3>
            <pre
              class="text-sm"><code>npm install wafir
# OR just load wafir.browser.js from your host (e.g. S3 or your CDN)</code></pre>
          </div>
        </div>
        <div class="flex gap-6 items-start max-md:flex-col max-md:gap-4">
          <div
            class="shrink-0 w-10 h-10 bg-primary text-white rounded-full flex items-center justify-center font-bold"
          >
            2
          </div>
          <div class="flex-1">
            <h3 class="text-lg font-bold mb-3">
              Add to your app (vanilla Web Component)
            </h3>
            <pre class="text-sm"><code>{quickstartCode}</code></pre>
          </div>
        </div>
        <div class="flex gap-6 items-start max-md:flex-col max-md:gap-4">
          <div
            class="shrink-0 w-10 h-10 bg-primary text-white rounded-full flex items-center justify-center font-bold"
          >
            3
          </div>
          <div class="flex-1">
            <h3 class="text-lg font-bold mb-3">Configure your forms</h3>
            <pre class="text-sm"><code>{configCode}</code></pre>
          </div>
        </div>
      </div>
      <div class="text-center mt-12">
        <a
          href={`${base}/installation`}
          class="inline-flex items-center gap-2 py-3 px-6 rounded-lg font-medium text-base transition-all duration-200 cursor-pointer border-none bg-primary text-white hover:bg-primary-hover hover:-translate-y-0.5"
          >View Full Installation Guide</a
        >
      </div>
    </div>
  </section>

  <section class="py-20 text-center max-md:py-12">
    <div class="max-w-[1200px] mx-auto px-6">
      <div class="text-center mb-12">
        <h2 class="text-4xl font-bold mb-2">Built With</h2>
        <p class="text-text-muted text-lg">Modern, reliable technologies</p>
      </div>
      <div class="flex justify-center gap-4 flex-wrap">
        <img
          src="https://img.shields.io/badge/Lit-324FFF?style=for-the-badge&logo=lit&logoColor=white"
          alt="Lit"
          loading="lazy"
          class="h-7"
        />
        <img
          src="https://img.shields.io/badge/TypeScript-3178C6?style=for-the-badge&logo=typescript&logoColor=white"
          alt="TypeScript"
          loading="lazy"
          class="h-7"
        />
        <img
          src="https://img.shields.io/badge/Vite-646CFF?style=for-the-badge&logo=vite&logoColor=white"
          alt="Vite"
          loading="lazy"
          class="h-7"
        />
        <img
          src="https://img.shields.io/badge/Fastify-000000?style=for-the-badge&logo=fastify&logoColor=white"
          alt="Fastify"
          loading="lazy"
          class="h-7"
        />
      </div>
    </div>
  </section>
</Layout>
